Repair : closure_97
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/0.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/0.java
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
46:return n;
TO:
44

INSERT:
47:}

TO:
44

Following are 2th generated patches:
Validating 19 patches...
Current actions:
INSERT:
46:return n;
TO:
44

INSERT:
47:}

TO:
44

Following are 3th generated patches:
Validating 18 patches...
Tested:40 patches
Compile failed:40 patches
Compilation rate:0.0
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/1.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/1.java
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
33:result=(long)lvalInt>>>rvalInt;

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
33:result=(long)lvalInt>>>rvalInt;

Following are 1th generated patches:
Validating 44 patches...
Tested:85 patches
Compile failed:78 patches
Compilation rate:0.08235294117647059
PNNNNNNNNNNNNNNNNNPPNNNNNNPNNNNNNNNNNNNPPNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/2.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/2.java
Tested:85 patches
Compile failed:78 patches
Compilation rate:0.08235294117647059

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/3.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/3.java
Current actions:
INSERT:
43:else{
if(left.getType()==Token.STRING&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
String s=left.getString();
int lvalInt=0;
int length=s.length();
for(int i=0;i<length;i++){
int ch=s.charAt(i);
if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
lvalInt=(lvalInt<<rvalInt)|ch;
}
Node newNumber=Node.newNumber(lvalInt);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
41

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
41

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
55:if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
TO:
41

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
42:}

TO:
41

INSERT:
44:double rval=right.getDouble();
TO:
41

INSERT:
45:int rvalInt=(int)rval;
TO:
41

INSERT:
46:if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
41

INSERT:
50:String s=left.getString();
TO:
41

INSERT:
51:int lvalInt=0;
TO:
41

INSERT:
52:int length=s.length();
TO:
41

INSERT:
53:for(int i=0;i<length;i++){
int ch=s.charAt(i);
if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
lvalInt=(lvalInt<<rvalInt)|ch;
}
TO:
41

INSERT:
61:Node newNumber=Node.newNumber(lvalInt);
TO:
41

INSERT:
62:n.getParent().replaceChild(n,newNumber);
TO:
41

INSERT:
63:reportCodeChange();
TO:
41

INSERT:
64:return newNumber;
TO:
41

Following are 3th generated patches:
Validating 200 patches...
Tested:873 patches
Compile failed:866 patches
Compilation rate:0.008018327605956471
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/4.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/4.java
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 28break;

DELETE:
Original line: 31break;

INSERT:
41:else{
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
29

Following are 2th generated patches:
Validating 5 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 28break;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

DELETE:
Original line: 31break;

INSERT:
41:else{
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
29

Following are 3th generated patches:
Validating 1 patches...
Tested:963 patches
Compile failed:946 patches
Compilation rate:0.017653167185877467
NNNNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPNNNNNNNNPNNNNNNNNNNNNNNPNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/5.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/5.java
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 131 patches...
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
48:return Node.newNumber(left.getDouble()<<right.getDouble());
TO:
44

INSERT:
51:case Token.URSH :
TO:
44

INSERT:
53:default :
TO:
44

INSERT:
56:}

TO:
44

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

INSERT:
46:switch (n.getType()){
case Token.LSH :
return Node.newNumber(left.getDouble()<<right.getDouble());
case Token.RSH :
return Node.newNumber(left.getDouble()>>right.getDouble());
case Token.URSH :
return Node.newNumber((long)left.getDouble()>>>right.getDouble());
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
44

INSERT:
56:}

TO:
44

Following are 3th generated patches:
Validating 200 patches...
Tested:1692 patches
Compile failed:1675 patches
Compilation rate:0.01004728132387707
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/6.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/6.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER&&(int)right.getDouble()==right.getDouble()){
Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER&&(int)right.getDouble()==right.getDouble()){
Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
44:Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
TO:
42

INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

Following are 3th generated patches:
Validating 100 patches...
Current actions:
INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return newNumber;
TO:
42

Following are 4th generated patches:
Validating 69 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return newNumber;
TO:
42

Tested:2074 patches
Compile failed:2055 patches
Compilation rate:0.009161041465766635
NNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/7.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/7.java
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

Following are 0th generated patches:
Validating 16 patches...
Current actions:
INSERT:
44:if(replacement!=null){
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
TO:
42

Following are 1th generated patches:
Validating 38 patches...
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,replacement);
TO:
42

INSERT:
47:return replacement;
TO:
42

Following are 3th generated patches:
Validating 69 patches...
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

INSERT:
44:if(replacement!=null){
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:2595 patches
Compile failed:2443 patches
Compilation rate:0.05857418111753372
NNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNNPNNNNNNPPNPNNNNNNNPNNNNNNNNNNPNPPNPPNNPNNNNNNNNNPNPNNNPNNNPNNPPNNNNNNNNNNNNNPPPNNPNPNNPNNNNNNNNNNPPNPPPPNPNPPNPNNNPNNPNPPNPPNNNPPNNNPNPPNNPNPPNNNNPPNPNNNNPNNPNNPPPNPNNPPPNNNNNNNNNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNNNNNPNNNNNPNNNNPNNNNNNNPNPNNPPNNNPNPPNNNNNNNNNNPPNNNPNNNPNNNNNNPNNNNNNNPNNPNPPPNNNNPNNNNNNNNNNPPNPNNPPNPPPPPNNPNNNPPPNNPNPPPPNNNNNNPPPNNPNPPNNNNPNPPNNNNPNNNPNNNPPPPNNNNPNPNNNNNPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/8.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/8.java
Current actions:
DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

Following are 0th generated patches:
Validating 5 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

INSERT:
44:}

TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

INSERT:
44:}

TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber((int)result);
TO:
37

INSERT:
44:}

TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:3200 patches
Compile failed:3029 patches
Compilation rate:0.0534375
NNNPPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPPNPNPPNNPNPNNNNNPNPNPNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/9.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/9.java
Current actions:
INSERT:
38:if(result<Integer.MIN_VALUE||result>Integer.MAX_VALUE){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
38:if(result<Integer.MIN_VALUE||result>Integer.MAX_VALUE){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber(result);
TO:
37

INSERT:
40:n.getParent().replaceChild(n,newNumber);
TO:
37

INSERT:
41:reportCodeChange();
TO:
37

INSERT:
42:return newNumber;
TO:
37

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber(result);
TO:
37

INSERT:
41:reportCodeChange();
TO:
37

Following are 3th generated patches:
Validating 200 patches...
Tested:3812 patches
Compile failed:3622 patches
Compilation rate:0.049842602308499476
NNNNNNNNNNNNNPPNNNNNNNNNNNNNNNPNNNNNNNNPPNPNNNNNNNNPNPPNNPNNNNNNPNNNPPNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/10.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/10.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER&&right.getDouble()<0){
int bits=(int)Math.ceil(-right.getDouble());
if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 28 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER&&right.getDouble()<0){
int bits=(int)Math.ceil(-right.getDouble());
if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 16 patches...
Current actions:
INSERT:
44:int bits=(int)Math.ceil(-right.getDouble());
TO:
42

INSERT:
45:if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 3th generated patches:
Validating 60 patches...
Current actions:
INSERT:
44:int bits=(int)Math.ceil(-right.getDouble());
TO:
42

Following are 4th generated patches:
Validating 44 patches...
Current actions:
INSERT:
48:reportCodeChange();
TO:
42

INSERT:
49:return newNumber;
TO:
42

Tested:3960 patches
Compile failed:3766 patches
Compilation rate:0.04898989898989899
NNNNNNNNNNNNNNNNNNPPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/11.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/11.java
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

Following are 0th generated patches:
Validating 23 patches...
Current actions:
DELETE:
Original line: 8error(BITWISE_OPERAND_OUT_OF_RANGE,left);

DELETE:
Original line: 9return n;

DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 2th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 3th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

DELETE:
Original line: 13return n;

Following are 4th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

DELETE:
Original line: 13return n;

Tested:3987 patches
Compile failed:3766 patches
Compilation rate:0.05543014798093805
PPPPPPPPPPPPPPPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/12.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/12.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&left.getDouble()==(1L<<53)&&right.getType()==Token.NUMBER&&right.getDouble()==0){
Node newNumber=Node.newNumber(Math.pow(2,53));
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&left.getDouble()==(1L<<53)&&right.getType()==Token.NUMBER&&right.getDouble()==0){
Node newNumber=Node.newNumber(Math.pow(2,53));
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
47:return newNumber;
TO:
42

Following are 2th generated patches:
Validating 19 patches...
Current actions:
INSERT:
46:reportCodeChange();
TO:
42

Following are 3th generated patches:
Validating 50 patches...
Current actions:
INSERT:
44:Node newNumber=Node.newNumber(Math.pow(2,53));
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return newNumber;
TO:
42

Tested:4272 patches
Compile failed:4020 patches
Compilation rate:0.05898876404494382
NNNNNNNNNPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNPPPNPNPPNNNPPNPNPNPNNNNNPNNNPNPNPPNNPPPNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/13.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/13.java
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

Following are 0th generated patches:
Validating 32 patches...
Current actions:
INSERT:
41:if(n.getType()==Token.RSH&&lval<0){
replacement=addBranchAfter(newNumber,replacement,true);
replacement=IR.ifNode(IR.lt(newNumber,Node.newNumber(0)),replacement);
}
TO:
40

Following are 1th generated patches:
Validating 43 patches...
Current actions:
INSERT:
39:Node replacement=n.getParent().replaceChild(n,newNumber);
TO:
38

INSERT:
42:replacement=addBranchAfter(newNumber,replacement,true);
TO:
40

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
39:Node replacement=n.getParent().replaceChild(n,newNumber);
TO:
38

INSERT:
41:if(n.getType()==Token.RSH&&lval<0){
replacement=addBranchAfter(newNumber,replacement,true);
replacement=IR.ifNode(IR.lt(newNumber,Node.newNumber(0)),replacement);
}
TO:
40

Following are 3th generated patches:
Validating 101 patches...
Tested:4645 patches
Compile failed:4392 patches
Compilation rate:0.05446716899892357
NNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/14.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/14.java
Current actions:
INSERT:
25:if(n.getType()==Token.URSH){
lvalInt=Integer.toUnsignedLong(lvalInt);
}
TO:
24

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
25:if(n.getType()==Token.URSH){
lvalInt=Integer.toUnsignedLong(lvalInt);
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
26:lvalInt=Integer.toUnsignedLong(lvalInt);
TO:
24

Following are 2th generated patches:
Validating 51 patches...
Tested:4898 patches
Compile failed:4645 patches
Compilation rate:0.05165373621886484
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/15.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/15.java
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

Following are 0th generated patches:
Validating 14 patches...
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 1th generated patches:
Validating 48 patches...
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

Following are 2th generated patches:
Validating 94 patches...
Current actions:
UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 3th generated patches:
Validating 92 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 4th generated patches:
Validating 138 patches...
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Tested:5278 patches
Compile failed:5025 patches
Compilation rate:0.04793482379689276
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/16.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/16.java
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 8 patches...
Tested:5287 patches
Compile failed:5025 patches
Compilation rate:0.04955551352373747
PPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/17.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/17.java
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 45 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 2th generated patches:
Validating 180 patches...
Current actions:
INSERT:
44:JSType type=n.getJSType();
TO:
37

INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
51:}

TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
44:JSType type=n.getJSType();
TO:
37

INSERT:
51:}

TO:
42

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
51:}

TO:
42

Tested:6110 patches
Compile failed:5805 patches
Compilation rate:0.04991816693944354
NNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPPNNPPPNPNNPNNNNNPPPNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNNNNNPNNPNNNNNNNNNNNNNNNNNNNPPNPPNPNPPPNNNNNNNNNPPNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/18.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/18.java
Current actions:
INSERT:
39:newNumber.useSourceInfoIfMissingFromForTree(n);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.useSourceInfoIfMissingFromForTree(n);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:6311 patches
Compile failed:5866 patches
Compilation rate:0.07051180478529552
NNNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPNPPPNNNNNPNNPNNNNNNNNPNNNNNNNNPNNPPPPPPPPNPPPPPPPPNPNNPNNPPNNNPNPPNPPNPPPPPPNNPNPNPPPPPPNPNNNNPNPPPPPNPPPNPNNNPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/19.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/19.java
Current actions:
INSERT:
25:if(rvalInt==0){
return n;
}
TO:
24

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
25:if(rvalInt==0){
return n;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
26:return n;
TO:
24

Following are 2th generated patches:
Validating 22 patches...
Tested:6535 patches
Compile failed:6066 patches
Compilation rate:0.07176740627390972
NPNNNNNNNNNNNNNNNPPPNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPPNNNNNPNNNNNNNNNPNNNPPNNNNNNNPPNNNPNNNNNPNNNNNPNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/20.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/20.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(rvalInt==0){
return left;
}
}
TO:
42

Following are 0th generated patches:
Validating 133 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(rvalInt==0){
return left;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

INSERT:
45:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
42

INSERT:
51:error(FRACTIONAL_BITWISE_OPERAND,right);
TO:
42

Tested:6859 patches
Compile failed:6373 patches
Compilation rate:0.07085580988482286
NNNNNNNNNNNNNNNPNNNNNNPNNNPNNNNNNNNNPNNNNNNNNNNNNNPPNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNPNPNPNPNNNNNNNNNPNPPNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/21.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/21.java
Current actions:
Wrap:
MethodDeclaration
On:
[return n;, error(FRACTIONAL_BITWISE_OPERAND,right);, return n;, result=lvalInt<<rvalInt;]
Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(n.getType()==Token.LSH){
result=lvalInt<<rvalInt;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
28:if(n.getType()==Token.RSH){
result=lvalInt>>rvalInt;
}
TO:
27

DELETE:
Original line: 30result=lvalInt>>rvalInt;

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:private Node tryFoldShift(Node n,Node left,Node right){
if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(n.getType()==Token.LSH){
result=lvalInt<<rvalInt;
}
else{
if(n.getType()==Token.RSH){
result=lvalInt>>rvalInt;
}
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}
TO:
1

DELETE:
Original line: 22error(FRACTIONAL_BITWISE_OPERAND,right);

DELETE:
Original line: 23return n;

DELETE:
Original line: 25switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}

INSERT:
31:if(n.getType()==Token.URSH){
result=lvalInt>>>rvalInt;
}
TO:
27

INSERT:
37:Node newNumber=Node.newNumber(result);
TO:
27

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

INSERT:
38:n.getParent().replaceChild(n,newNumber);
TO:
27

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
39:reportCodeChange();
TO:
27

INSERT:
40:return newNumber;
TO:
27

DELETE:
Original line: 40reportCodeChange();

DELETE:
Original line: 41return newNumber;

DELETE:
Original line: 43return n;

Following are 4th generated patches:
Validating 200 patches...
Tested:7496 patches
Compile failed:7010 patches
Compilation rate:0.06483457844183564
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/22.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/22.java
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
if(right.getDouble()==0){
return left;
}
}
TO:
42

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
if(right.getDouble()==0){
return left;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:if(right.getDouble()==0){
return left;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:return left;
TO:
42

Following are 3th generated patches:
Validating 18 patches...
Tested:7917 patches
Compile failed:7392 patches
Compilation rate:0.06631299734748011
NPPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNPNPNNPNNNNNNNNNNNNNNNPPNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNPNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNPNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNNPNPNPNPNNNNNNNNNNNPNPNNNPNPNNNNNNNNNNNNNNNNNNPNNNNNNNPNPNNNNNNNNNNNNNPNNPNNNNNNNPPPNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/23.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/23.java
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 28 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 12 patches...
Current actions:
INSERT:
48:reportCodeChange();
TO:
42

Following are 3th generated patches:
Validating 50 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

INSERT:
45:if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

Tested:8207 patches
Compile failed:7514 patches
Compilation rate:0.08444011209942731
NNNNNNNNPNPPNPPPNNNNPNNPPPPPPNNNNNNNNNNNNNNNNNNNPPNPPPPNNPPPNNNPNPPPNNPNNNNNPPNNNNPPPPNNNPPNPPPPPPPPPPNNNPPPPPPPPPNPPPPPPPPPPNNNPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPNPPNNNNNPNPNNNNNNPNPNNNNNNNNNNNNNNNNNNPNNNPNPPPPPNNNPNNNNNNPNNNNPPPPPPPPPNPNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPNPPPPPPPNPNNPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/24.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/24.java
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 39 patches...
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 36 patches...
Current actions:
INSERT:
46:if(left.getType()==Token.NUMBER){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

INSERT:
46:if(left.getType()==Token.NUMBER){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 3th generated patches:
Validating 31 patches...
Current actions:
INSERT:
44:return n;
TO:
42

Following are 4th generated patches:
Validating 18 patches...
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

INSERT:
47:Node newNumber=Node.newNumber(0);
TO:
42

INSERT:
48:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
49:reportCodeChange();
TO:
42

INSERT:
50:return newNumber;
TO:
42

Tested:8331 patches
Compile failed:7631 patches
Compilation rate:0.08402352658744448
NNNNNNNNNNNNNNNNNNNNPNNPNPNNNNNNNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/25.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/25.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER){
int leftValue=left.getInt();
if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 44 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER){
int leftValue=left.getInt();
if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 80 patches...
Current actions:
INSERT:
46:int result=(long)leftValue<<right.getInt();
TO:
42

INSERT:
47:Node newNumber=Node.newNumber(result);
TO:
42

INSERT:
48:n.getParent().replaceChild(n,newNumber);
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:8655 patches
Compile failed:7954 patches
Compilation rate:0.08099364529173889
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/26.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/26.java
Current actions:
INSERT:
38:if(lvalInt==0){
return Node.newNumber(0);
}
TO:
37

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
38:if(lvalInt==0){
return Node.newNumber(0);
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:return Node.newNumber(0);
TO:
37

Following are 2th generated patches:
Validating 200 patches...
Tested:9057 patches
Compile failed:8321 patches
Compilation rate:0.08126311140554267
NPNNNNNNNNNNNNPPPPNNNNNNNNNNNNNNPNPNNNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPNPNPPPPNPNNNNPNNNNNNNNPNPPPPNPNNNNNNPPNNNNNNNNNNNNNPNNNNNNNNNNNPPNNNNNNNNNNNNNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/27.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/27.java
Current actions:
INSERT:
43:if(left.isInt()&&right.isInt()){
long lval=left.getInt();
long rval=right.getInt();
long result;
switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isInt()&&right.isInt()){
long lval=left.getInt();
long rval=right.getInt();
long result;
switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:long rval=right.getInt();
TO:
42

INSERT:
47:switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Tested:9425 patches
Compile failed:8686 patches
Compilation rate:0.07840848806366048
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/28.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/28.java
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

Following are 0th generated patches:
Validating 25 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 1th generated patches:
Validating 190 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 2th generated patches:
Validating 96 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 3th generated patches:
Validating 142 patches...
Current actions:
INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 4th generated patches:
Validating 72 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

Tested:9940 patches
Compile failed:9130 patches
Compilation rate:0.08148893360160966
NNNNNNNNNNNNNPNNPPPPNNNNPNNNNNNNNNPPPNPPPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNPNNNNNNNPNNNNNNNNNNPNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNPPPPPPNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNPNNNNNNNPNNNPPPNPNNPPNNNNNNPNNNNNNNNNNPNNNNNNPNNNNNNNNPPPNNNNNNNNNNNNNPNPNNPNNNNNPNPNNNNNNNNPNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNPPPPPNPNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/29.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/29.java
Current actions:
INSERT:
6:if(left.getType()==Token.NUMBER){
lval=left.getDouble();
allConstant&=true;
}
TO:
2

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
13:if(right.getType()==Token.NUMBER){
rval=right.getDouble();
allConstant&=true;
}
TO:
2

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:{
boolean allConstant=true;
double lval=0;
double rval=0;
if(left.getType()==Token.NUMBER){
lval=left.getDouble();
allConstant&=true;
}
else{
allConstant&=false;
}
if(right.getType()==Token.NUMBER){
rval=right.getDouble();
allConstant&=true;
}
else{
allConstant&=false;
}
boolean supported=false;
if(allConstant){
int leftBits=0;
int rightBits=0;
if(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE){
leftBits=32-Integer.numberOfLeadingZeros((int)Math.ceil(lval));
}
if(rval>=0&&rval<32){
rightBits=rval;
}
if(leftBits>0&&leftBits<32&&rightBits>=0&&rightBits<32){
supported=true;
}
}
if(!supported){
return n;
}
int lvalInt=(int)lval;
int rvalInt=(int)rval;
long result=0;
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
1

DELETE:
Original line: 2{
if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}

DELETE:
Original line: 3if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}

INSERT:
3:boolean allConstant=true;
TO:
2

INSERT:
4:double lval=0;
TO:
2

INSERT:
6:if(left.getType()==Token.NUMBER){
lval=left.getDouble();
allConstant&=true;
}
TO:
2

INSERT:
13:if(right.getType()==Token.NUMBER){
rval=right.getDouble();
allConstant&=true;
}
TO:
2

INSERT:
20:boolean supported=false;
TO:
2

INSERT:
21:if(allConstant){
int leftBits=0;
int rightBits=0;
if(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE){
leftBits=32-Integer.numberOfLeadingZeros((int)Math.ceil(lval));
}
if(rval>=0&&rval<32){
rightBits=rval;
}
if(leftBits>0&&leftBits<32&&rightBits>=0&&rightBits<32){
supported=true;
}
}
TO:
2

INSERT:
34:if(!supported){
return n;
}
TO:
24

INSERT:
37:int lvalInt=(int)lval;
TO:
24

INSERT:
39:long result=0;
TO:
24

DELETE:
Original line: 43return n;

Tested:10340 patches
Compile failed:9530 patches
Compilation rate:0.07833655705996131
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/30.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/30.java
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:return null;
TO:
44

INSERT:
47:}

TO:
44

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

INSERT:
46:return null;
TO:
44

INSERT:
47:}

TO:
44

Following are 3th generated patches:
Validating 200 patches...
Tested:10743 patches
Compile failed:9933 patches
Compilation rate:0.07539793353811784
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/31.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/31.java
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=31)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=31)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 8 patches...
Tested:10752 patches
Compile failed:9933 patches
Compilation rate:0.076171875
PPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/32.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/32.java
Current actions:
DELETE:
Original line: 4double result;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 4double result;

INSERT:
26:return Node.newNumber(lvalInt<<rvalInt);
TO:
26

DELETE:
Original line: 27result=lvalInt<<rvalInt;

INSERT:
28:return Node.newNumber(lvalInt>>rvalInt);
TO:
29

DELETE:
Original line: 30result=lvalInt>>rvalInt;

INSERT:
30:return Node.newNumber((long)lvalInt>>>rvalInt);
TO:
32

DELETE:
Original line: 31break;

INSERT:
32:throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
TO:
35

DELETE:
Original line: 33result=lvalInt>>>rvalInt;

DELETE:
Original line: 34break;

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 40reportCodeChange();

Following are 1th generated patches:
Validating 200 patches...
Tested:11122 patches
Compile failed:10278 patches
Compilation rate:0.07588563208056105
NNNNNNNNNNNPPNNNPPNPPPNNNNPNPNNNNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNPNNPPPNPNNNPNNNNNNNNNNNNNPPNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/33.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/33.java
Current actions:
INSERT:
43:if(left.getType()!=Token.NUMBER){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(right.getType()!=Token.NUMBER){
return n;
}
TO:
44

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.getType()!=Token.NUMBER){
return n;
}
TO:
42

INSERT:
46:if(right.getType()!=Token.NUMBER){
return n;
}
TO:
44

INSERT:
49:int shiftAmount=(int)right.getDouble();
TO:
44

INSERT:
50:if(shiftAmount!=right.getDouble()){
return n;
}
TO:
44

INSERT:
54:return n;
TO:
44

INSERT:
58:case Token.LSH :
TO:
44

INSERT:
59:result=(int)lval<<shiftAmount;
TO:
44

INSERT:
61:case Token.RSH :
TO:
44

INSERT:
62:result=(int)lval>>shiftAmount;
TO:
44

INSERT:
63:break;
TO:
44

INSERT:
64:case Token.URSH :
TO:
44

INSERT:
66:break;
TO:
44

INSERT:
71:n.getParent().replaceChild(n,newNumber);
TO:
44

INSERT:
72:reportCodeChange();
TO:
44

INSERT:
74:}

TO:
44

Tested:11522 patches
Compile failed:10678 patches
Compilation rate:0.07325117167158479
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/34.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/34.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if((lvalInt&((1<<rvalInt)-1))!=0){
Node newNumber=Node.newNumber(lvalInt);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
47:if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
47:if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
TO:
42

INSERT:
53:return n;
TO:
42

INSERT:
56:if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
TO:
42

INSERT:
61:if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
42

INSERT:
69:return newNumber;
TO:
42

Tested:11524 patches
Compile failed:10679 patches
Compilation rate:0.07332523429364804
PN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/35.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/35.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getDouble()<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getDouble()>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getDouble()>>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
73:if(right.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getInt()<<right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getInt()>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getInt()>>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getDouble()<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getDouble()>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getDouble()>>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

INSERT:
73:if(right.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getInt()<<right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getInt()>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getInt()>>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Following are 3th generated patches:
Validating 2 patches...
Tested:11527 patches
Compile failed:10682 patches
Compilation rate:0.07330615077643793
NNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/36.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/36.java
Current actions:
INSERT:
39:newNumber.srcref(n);
TO:
38

Following are 0th generated patches:
Validating 36 patches...
Current actions:
INSERT:
41:if(!newNumber.getJSType().isNumber()||!left.getJSType().isNumber()||!right.getJSType().isNumber()){
replacement=newTypeCast(newNumber,n.getType());
}
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
40:Node replacement=newNumber;
TO:
38

INSERT:
41:if(!newNumber.getJSType().isNumber()||!left.getJSType().isNumber()||!right.getJSType().isNumber()){
replacement=newTypeCast(newNumber,n.getType());
}
TO:
38

UPDATE
FROM:
41:return newNumber;
TO:
46:return replacement;

Following are 2th generated patches:
Validating 200 patches...
Current actions:
UPDATE
FROM:
41:return newNumber;
TO:
46:return replacement;

Following are 3th generated patches:
Validating 23 patches...
Current actions:
INSERT:
39:newNumber.srcref(n);
TO:
38

INSERT:
41:if(!newNumber.getJSType().isNumber()||!left.getJSType().isNumber()||!right.getJSType().isNumber()){
replacement=newTypeCast(newNumber,n.getType());
}
TO:
38

UPDATE
FROM:
39:n.getParent().replaceChild(n,newNumber);
TO:
44:n.getParent().replaceChild(n,replacement);

UPDATE
FROM:
41:return newNumber;
TO:
46:return replacement;

Following are 4th generated patches:
Validating 200 patches...
Tested:12184 patches
Compile failed:11278 patches
Compilation rate:0.07435981615233092
NNNNNNNNNNNNNNNNPPNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPNNNPPNNNPNNNNNNNNNPPPPNPPPNNPNPNNNPPPPNPPNPPPNPPNPPNPNNPPPNNNNNNNNPNNNPNNNNNNNNNNPNPNPPPPNPNPNNNNNNPNPPNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/37.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/37.java
Current actions:
INSERT:
39:newNumber.setIsJavaScriptConstantNumber(true);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.setIsJavaScriptConstantNumber(true);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:12385 patches
Compile failed:11433 patches
Compilation rate:0.07686717803794914
NNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPPPPNNNPNNPNNNNNPPNNNNPNNPPNNNNNNNNPPNPPNPPNPPNPPPPPPPPNPPNNPPNPPPPPNPNNNNNPNPNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/38.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/38.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH||n.getType()==Token.RSH||n.getType()==Token.URSH){
Node maybeNumber=tryFoldShift(left,left,right);
if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
}
TO:
42

Following are 0th generated patches:
Validating 6 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH||n.getType()==Token.RSH||n.getType()==Token.URSH){
Node maybeNumber=tryFoldShift(left,left,right);
if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
45:if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:Node maybeNumber=tryFoldShift(left,left,right);
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:Node maybeNumber=tryFoldShift(left,left,right);
TO:
42

INSERT:
45:if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:12992 patches
Compile failed:11924 patches
Compilation rate:0.08220443349753695
NNNPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNNNNNPPNNNNPNNNNNNNNPNPNNNNNNNNNNNPNNNNNNNNNPNNPPNPPPPPPPNPPNNNNNNNNNNNNNPPNPNNNNNNNNNNNNNNNNNNNPNNNPPPNNPPPNNNPNPNPNNNNNNNNNNNNNNPNNPNNNNNNPNNPPNNNPNNPNNNNNPNNNPNNNNNPPPPPPNPPNNNPNPPPPNNNNNNNNNNNNPPNPNNNNPNPNNNNNNPNNNNPNNPNNNNNNNNNNNPNNNNNNNNNPNNPPPNPPPPPNPPPNNNNNNNNNNNNNPPPNNNNNNNNNNNNNNNNNNNNNPNNPPNPNPPNPNPNNPNNNPNNNNNNNNNNNPNNNPNNNNNNPNPNPNPNNNNPNNNPNNNNNPNNNNNPPPPPPNPNPNNPNPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/39.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/39.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
Node newLeft=Node.newNumber((int)left.getDouble());
n.replaceChild(left,newLeft);
reportCodeChange();
return tryFoldShift(n,newLeft,right);
}
TO:
42

Following are 0th generated patches:
Validating 115 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
Node newLeft=Node.newNumber((int)left.getDouble());
n.replaceChild(left,newLeft);
reportCodeChange();
return tryFoldShift(n,newLeft,right);
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
44:Node newLeft=Node.newNumber((int)left.getDouble());
TO:
42

INSERT:
45:n.replaceChild(left,newLeft);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
49:else{
if(right.getType()==Token.NUMBER){
Node newRight=Node.newNumber((int)right.getDouble());
n.replaceChild(right,newRight);
reportCodeChange();
return tryFoldShift(n,left,newRight);
}
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Tested:13300 patches
Compile failed:12205 patches
Compilation rate:0.08233082706766917
NNNNNNNNNNPNPPNPNNNNNPPNNNNNNNNNNPNPPPNNNNNNNNPNNPNPNNNNNPPNPNNPNNPNNNNPNPNNNPNPNNNNPNNNNNNNNNNPPNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/40.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/40.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&right.getType()==Token.STRING){
double result;
double lval=left.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
String rvalString=right.getString();
if(!rvalString.equals("0")){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<0;
break;
case Token.RSH :
result=lvalInt>>0;
break;
case Token.URSH :
result=lvalInt>>>0;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
46:if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
48:return n;
TO:
42

INSERT:
51:if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
TO:
42

INSERT:
64:case Token.RSH :
TO:
42

Tested:13302 patches
Compile failed:12206 patches
Compilation rate:0.08239362501879417
PN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/41.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/41.java
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

Following are 0th generated patches:
Validating 25 patches...
FILE : /data/PLM4APR/tmp/defects4j_buggy//closure/closure_97_buggy/src/com/google/javascript/jscomp/PeepholeFoldConstants.java
SUCCESS
//Following are generated patch:
  private Node tryFoldShift(  Node n,  Node left,  Node right){
    if (left.getType() == Token.NUMBER && right.getType() == Token.NUMBER) {
      double result;
      double lval=left.getDouble();
      double rval=right.getDouble();
      if (!(lval >= Integer.MIN_VALUE && lval <= Integer.MAX_VALUE)) {
        error(BITWISE_OPERAND_OUT_OF_RANGE,left);
        return n;
      }
      if (!(rval >= 0 && rval < 32)) {
        error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
        return n;
      }
      int lvalInt=(int)lval;
      if (lvalInt != lval) {
        error(FRACTIONAL_BITWISE_OPERAND,left);
        return n;
      }
      int rvalInt=(int)rval;
      if (rvalInt != rval) {
        error(FRACTIONAL_BITWISE_OPERAND,right);
        return n;
      }
long lvalLong=lvalInt&0xffffffffL;
long rvalLong=rvalInt&0xffffffffL;
switch (n.getType()) {
case Token.LSH:
        result=lvalInt << rvalInt;
      break;
case Token.RSH:
    result=lvalInt >> rvalInt;
  break;
case Token.URSH:
result=lvalLong>>>rvalLong;
break;
default :
throw new AssertionError("Unknown shift operator: " + Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}

1 th patch/25
Trace:

START : 
2024.04.12 AD at 22:14:12 HKT
---------TIME : 
2024.04.12 AD at 22:56:16 HKT
--------------- END -----------------
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 1th generated patches:
Validating 117 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 2th generated patches:
Validating 186 patches...
Current actions:
UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

Following are 3th generated patches:
Validating 48 patches...
Current actions:
INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 4th generated patches:
Validating 165 patches...
Current actions:
INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Tested:13834 patches
Compile failed:12712 patches
Compilation rate:0.08110452508312853
NNNNNNNNNNPNNNNNPPPNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNPNPPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNPNNNNPPPPPNNPNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/42.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/42.java
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 4double result;

DELETE:
Original line: 5double lval=left.getDouble();

DELETE:
Original line: 6double rval=right.getDouble();

DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

DELETE:
Original line: 13return n;

DELETE:
Original line: 15int lvalInt=(int)lval;

DELETE:
Original line: 17error(FRACTIONAL_BITWISE_OPERAND,left);

DELETE:
Original line: 25switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 41return newNumber;

DELETE:
Original line: 43return n;

Following are 1th generated patches:
Validating 13 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 3if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 4double result;

DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

DELETE:
Original line: 16if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}

DELETE:
Original line: 22error(FRACTIONAL_BITWISE_OPERAND,right);

DELETE:
Original line: 23return n;

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 28break;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

DELETE:
Original line: 31break;

DELETE:
Original line: 33result=lvalInt>>>rvalInt;

DELETE:
Original line: 34break;

DELETE:
Original line: 35default :

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 40reportCodeChange();

DELETE:
Original line: 41return newNumber;

Following are 3th generated patches:
Validating 16 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 4double result;

DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

DELETE:
Original line: 16if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}

DELETE:
Original line: 20int rvalInt=(int)rval;

DELETE:
Original line: 21if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}

DELETE:
Original line: 26case Token.LSH :

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 28break;

DELETE:
Original line: 29case Token.RSH :

DELETE:
Original line: 30result=lvalInt>>rvalInt;

DELETE:
Original line: 32case Token.URSH :

DELETE:
Original line: 33result=lvalInt>>>rvalInt;

DELETE:
Original line: 35default :

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 40reportCodeChange();

DELETE:
Original line: 41return newNumber;

DELETE:
Original line: 43return n;

Following are 4th generated patches:
Validating 19 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

DELETE:
Original line: 16if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

DELETE:
Original line: 35default :

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

DELETE:
Original line: 43return n;

Tested:13838 patches
Compile failed:12716 patches
Compilation rate:0.08108108108108109
NNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/43.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/43.java
Current actions:
DELETE:
Original line: 4double result;

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
24:int result;
TO:
24

Following are 1th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 4double result;

INSERT:
24:int result;
TO:
24

Following are 2th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 4double result;

Following are 3th generated patches:
Validating 1 patches...
Tested:13844 patches
Compile failed:12720 patches
Compilation rate:0.08119040739670616
NNPNPN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/44.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/44.java
Current actions:
UPDATE
FROM:
4:double result;
TO:
4:long result;

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
4:double result;
TO:
4:long result;

Following are 0th generated patches:
Validating 1 patches...
Tested:13846 patches
Compile failed:12720 patches
Compilation rate:0.08132312581250903
PP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/45.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/45.java
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

Following are 0th generated patches:
Validating 17 patches...
Current actions:
INSERT:
40:if(n.getType()==Token.URSH){
newNumber=Node.newNumber(result).castTo(type,true);
}
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
41:newNumber=Node.newNumber(result).castTo(type,true);
TO:
38

INSERT:
44:newNumber=Node.newNumber(result).castTo(type,true);
TO:
38

Following are 2th generated patches:
Validating 86 patches...
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

INSERT:
41:newNumber=Node.newNumber(result).castTo(type,true);
TO:
38

Following are 3th generated patches:
Validating 71 patches...
Current actions:
INSERT:
40:if(n.getType()==Token.URSH){
newNumber=Node.newNumber(result).castTo(type,true);
}
TO:
38

INSERT:
43:else{
if(type.isUnknown()){
newNumber=Node.newNumber(result).castTo(type,true);
}
}
TO:
38

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

INSERT:
41:newNumber=Node.newNumber(result).castTo(type,true);
TO:
38

INSERT:
43:else{
if(type.isUnknown()){
newNumber=Node.newNumber(result).castTo(type,true);
}
}
TO:
38

Tested:14415 patches
Compile failed:13289 patches
Compilation rate:0.07811307665626084
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/46.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/46.java
Current actions:
INSERT:
38:if(result>Integer.MAX_VALUE||result<Integer.MIN_VALUE){
return Node.newNumber(new BigInteger(String.valueOf(result)));
}
TO:
37

Following are 0th generated patches:
Validating 5 patches...
Current actions:
INSERT:
38:if(result>Integer.MAX_VALUE||result<Integer.MIN_VALUE){
return Node.newNumber(new BigInteger(String.valueOf(result)));
}
TO:
37

Following are 1th generated patches:
Validating 135 patches...
Current actions:
INSERT:
38:if(result>Integer.MAX_VALUE||result<Integer.MIN_VALUE){
return Node.newNumber(new BigInteger(String.valueOf(result)));
}
TO:
37

UPDATE
FROM:
38:Node newNumber=Node.newNumber(result);
TO:
41:Node newNumber=Node.newNumber((int)result);

Following are 2th generated patches:
Validating 200 patches...
Tested:14754 patches
Compile failed:13627 patches
Compilation rate:0.07638606479598753
NNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/47.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/47.java
Current actions:
INSERT:
43:if(right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 66 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval>=0&&rval==(int)rval){
Node replacement=Node.newNumber(lval<<(int)rval);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
51:reportCodeChange();
TO:
42

INSERT:
52:return replacement;
TO:
42

Following are 4th generated patches:
Validating 69 patches...
Current actions:
INSERT:
44:return n;
TO:
42

INSERT:
51:reportCodeChange();
TO:
42

Tested:15089 patches
Compile failed:13935 patches
Compilation rate:0.07647955464245478
NNNNNNNNNNNNNNNNPPNNPNNNNNNNNNNPNNPNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNPNNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNPNNNNNNNNPNNNNPNNPNNNNNNNNNNNNNNNNNNNPPPNNNNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/48.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/48.java
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
29:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
26

Following are 1th generated patches:
Validating 166 patches...
Current actions:
INSERT:
38:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
32

Following are 2th generated patches:
Validating 166 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

DELETE:
Original line: 28break;

INSERT:
29:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
26

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
35:result=lvalLong>>rvalLong;

INSERT:
36:break;
TO:
30

INSERT:
38:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
32

INSERT:
47:result=(int)result;
TO:
37

Following are 4th generated patches:
Validating 200 patches...
Tested:15753 patches
Compile failed:14573 patches
Compilation rate:0.0749063670411985
NNNNNNNNNNNNPPNNNNPNPNNPPPNNNNNNNNNPNNNNNNNNNNNNPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPNNNNNNNNPPNNNNNNNNNNNNNNNPNNNNNNNNNNNPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/49.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/49.java
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

Following are 0th generated patches:
Validating 67 patches...
Current actions:
INSERT:
40:if(parent.getType()==Token.ASSIGN){
Node newNumberClone=newNumber.cloneNode();
parent.replaceChild(n,newNumberClone);
newNumberClone.addChildToFront(newNumber);
}
TO:
38

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:Node parent=n.getParent();
TO:
38

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node parent=n.getParent();
TO:
38

INSERT:
41:Node newNumberClone=newNumber.cloneNode();
TO:
38

INSERT:
45:else{
parent.replaceChild(n,newNumber);
}
TO:
38

Following are 3th generated patches:
Validating 200 patches...
Tested:16221 patches
Compile failed:14857 patches
Compilation rate:0.08408852721780408
NNNNNNNNNNNNPPNPPPNNNNPNNNNNPNNNNNNNNPPPNNNPNNPNNNNNNNNNPNPPNPPNNNPNNPPPPPPPPPPPPPPPPPPPPNNNNPPPPPPPPPPPPPPPPNNNPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPPPNPPPPPPPPPPPPNNNNPNNNNNNNPPPPPPNPNPPPPPPPNPPPPPPPPPPPNPPPNNNPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPNNPPNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/50.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/50.java
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

Following are 0th generated patches:
Validating 193 patches...
Current actions:
INSERT:
26:if(lvalLong!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
31:if(rvalLong!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
24

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
28:return n;
TO:
24

INSERT:
31:if(rvalLong!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
37:result=lvalLong<<rvalLong;

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
26:if(lvalLong!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
TO:
24

INSERT:
32:error(FRACTIONAL_BITWISE_OPERAND,right);
TO:
24

INSERT:
33:return n;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
43:result=lvalLong>>>rvalLong;

Following are 4th generated patches:
Validating 200 patches...
Tested:17195 patches
Compile failed:15792 patches
Compilation rate:0.0815934864786275
NNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNPNNNNNNNNPNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPPNNNNNPNNNNNNPPNNNNNNNNNNNNNPNNPPNNNNNPNPNNNNNNNNNPPPPPNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/51.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/51.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&(left.getType()==Token.NUMBER||right.getType()==Token.NUMBER)){
if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 27 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&(left.getType()==Token.NUMBER||right.getType()==Token.NUMBER)){
if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
44:if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 1 patches...
Current actions:
INSERT:
48:reportCodeChange();
TO:
42

Following are 3th generated patches:
Validating 50 patches...
Current actions:
INSERT:
45:int result=(int)right.getDouble();
TO:
42

INSERT:
47:n.getParent().replaceChild(n,newNumber);
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:int result=(int)right.getDouble();
TO:
42

INSERT:
47:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
49:return newNumber;
TO:
42

Tested:17473 patches
Compile failed:16038 patches
Compilation rate:0.08212670978080468
NNNNNNNNNNNNPPPNNNNNPNNPPPPPPNNNNNNNPPPNPPPPNNPPNNNNPPPNPPNNNNNNPNPNNPNPPNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/52.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/52.java
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
49:if(left.isName()&&left.getString().equals("NaN")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

INSERT:
49:if(left.isName()&&left.getString().equals("NaN")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

INSERT:
55:if(left.getType()==Token.STRING){
Node newString=Node.newString(left.getString());
n.getParent().replaceChild(n,newString);
reportCodeChange();
return newString;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:18210 patches
Compile failed:16626 patches
Compilation rate:0.08698517298187809
NNNNNNNNNNNNNPNNPPPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPPPNNNNNNPNPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNNPPNPNNNNNNNNNNNNNNNPNNPPNNNPNNNNNNNNNNNNNNNNNNNNNPNNNPPPPPPPPPNPPPPPPPPPPNPNNNPNNPNPPPNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPPNPPPPPPPPPPPNNNNNNNNNNNPNNNNNNNNNNNNPNPNNNNNNNNNNNPNNNNNNPNNNNNNNNNNNPNNNNNNNNNNPPPPPPPPPPNNNNNPPPPPPNNPPPPPPPPNPPNNNPNPPPNPNPPNNNNNNNNNNNNNNNNNNNPPPPPPPPPPNPPPPPPPPPNPNNNPNPNNPPPPNNNPNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPPPNPPPNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/53.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/53.java
Current actions:
INSERT:
39:newNumber.useSourceInfoFromForTree(n);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.useSourceInfoFromForTree(n);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:18411 patches
Compile failed:16664 patches
Compilation rate:0.09488892509912553
NNNNPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNPPPPNPPNNNPPNNPNPPPPNPPPNPPPNPNPPNPNNNNPPNPNNNPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPPPPPPPPP
Finish : closure-97 > patch : 1 | Start : Fri Apr 12 22:14:12 HKT 2024 | End : 2024.04.12 AD at 23:09:15 HKT
