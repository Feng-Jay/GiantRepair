Repair : closure_95
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/0.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/0.java
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

Following are 0th generated patches:
Validating 7 patches...
Current actions:
INSERT:
16:if(oldVar!=null){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
15:Var oldVar=scopeToDeclareIn.getVar(variableName);
TO:
14

DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

INSERT:
16:if(oldVar!=null){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
15:Var oldVar=scopeToDeclareIn.getVar(variableName);
TO:
14

INSERT:
16:if(oldVar!=null){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

DELETE:
Original line: 16Var oldVar=scopeToDeclareIn.getVar(variableName);

Following are 3th generated patches:
Validating 200 patches...
Tested:601 patches
Compile failed:388 patches
Compilation rate:0.3544093178036606
NNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPPNPNNNNNNNNNNNNPNNNNNNNNPNNNNNNPPNNPPNPPNNNPPNNNNNPPPPPPPNNNNPPPNNPPPNNPNPNNNPNPNNNNNNPNNNPPPPPPPPPPPPPNPPPPPNPNNPNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPNPPPPPPPPNNNNNNNNNNNNPNNNPPNPNNNNNPNNNNNNNNNNNNNNNNPNNNNNNPNNPNNPNPPPPPNPNNPPPPPPPPNPNPNNNNNPNNPNNNNPPPPNNPNNNNNNNNPPPPPPPPPPPPPPPNPPNNPPNPNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPNPPPPPNPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/1.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/1.java
Tested:601 patches
Compile failed:388 patches
Compilation rate:0.3544093178036606

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/2.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/2.java
Current actions:
INSERT:
15:Scope currentScope=scopeToDeclareIn;
TO:
14

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
15:Scope currentScope=scopeToDeclareIn;
TO:
14

UPDATE
FROM:
39:scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
TO:
40:currentScope.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));

Following are 1th generated patches:
Validating 96 patches...
Current actions:
UPDATE
FROM:
39:scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
TO:
40:currentScope.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));

Following are 2th generated patches:
Validating 93 patches...
Current actions:
INSERT:
15:Scope currentScope=scopeToDeclareIn;
TO:
14

Following are 3th generated patches:
Validating 3 patches...
Tested:795 patches
Compile failed:486 patches
Compilation rate:0.3886792452830189
NPPNPPPPPPPPPPNPPPPPPPPPPNNNPPPPPPPPNNNNNNNNNNNPNNNNNNNNNNPPPNPPPNPNPNPPNNNNNNNPPPNNNNNNNPNNNPNPPPNPPPPPPPPPPNPPPPPPPPPPNNNNNNNPPPPPNNPNNNNNNNNPNNNNNNNPPPNPNPPPPPNPNNNNNNNPNPNPNNNNNNNPNPNNPPPNPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/3.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/3.java
Current actions:
INSERT:
22:if(isConst){
Node scopeNode=scope.getRootNode();
if(scopeNode.getType()==Token.SCRIPT){
isExtern=((ScriptNode)scopeNode).isFromExterns();
}
}
TO:
18

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
24:if(scopeNode.getType()==Token.SCRIPT){
isExtern=((ScriptNode)scopeNode).isFromExterns();
}
TO:
18

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 16Var oldVar=scopeToDeclareIn.getVar(variableName);

INSERT:
17:oldVar=scopeToDeclareIn.getVar(variableName);
TO:
15

INSERT:
20:boolean isConst=(parent.getType()==Token.EXPR_RESULT||parent.getType()==Token.ASSIGN);
TO:
18

INSERT:
21:boolean isExtern=isConst;
TO:
18

DELETE:
Original line: 23CompilerInput input=compiler.getInput(sourceName);

INSERT:
43:if(oldVar!=null){
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}
TO:
22

INSERT:
53:globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
TO:
34

Tested:1195 patches
Compile failed:886 patches
Compilation rate:0.2585774058577406
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/4.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/4.java
Current actions:
INSERT:
15:if(scopeToDeclareIn==null){
scopeToDeclareIn=scope.getRootScope();
}
TO:
14

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
15:if(scopeToDeclareIn==null){
scopeToDeclareIn=scope.getRootScope();
}
TO:
14

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
16:scopeToDeclareIn=scope.getRootScope();
TO:
14

Following are 2th generated patches:
Validating 200 patches...
Tested:1597 patches
Compile failed:1282 patches
Compilation rate:0.19724483406386975
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/5.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/5.java
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

Following are 0th generated patches:
Validating 14 patches...
Current actions:
INSERT:
17:if(!isNewVar){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

INSERT:
15:Var oldVar=scopeToDeclareIn.getVar(variableName);
TO:
14

INSERT:
17:if(!isNewVar){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

INSERT:
15:Var oldVar=scopeToDeclareIn.getVar(variableName);
TO:
14

INSERT:
16:boolean isNewVar=oldVar==null;
TO:
14

INSERT:
17:if(!isNewVar){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
14

Following are 3th generated patches:
Validating 200 patches...
Tested:2200 patches
Compile failed:1769 patches
Compilation rate:0.19590909090909092
NNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPNPNNNNPNPNNPPNNNPPNNNNNNNNNNNNPNPPNPPPPPPPPPNPNNPPNPPNPNPNNPNPPPPPPPPPNPPPPPPPPPNPPNNNNPNNPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNPPNPNNNNNNPPPPPPPPPPNPPPPPPPPNPPPNNNNNNNPPPPPNNPNNNNNNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/6.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/6.java
Current actions:
DELETE:
Original line: 25if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}

Following are 0th generated patches:
Validating 32 patches...
Current actions:
DELETE:
Original line: 28if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}

DELETE:
Original line: 31else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}

Following are 1th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 26ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);

Following are 2th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 27boolean isExtern=input.isExtern();

DELETE:
Original line: 28if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}

DELETE:
Original line: 31else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}

Following are 3th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 31else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}

Following are 4th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 26ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);

DELETE:
Original line: 27boolean isExtern=input.isExtern();

DELETE:
Original line: 28if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}

DELETE:
Original line: 31else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}

Tested:2236 patches
Compile failed:1789 patches
Compilation rate:0.19991055456171736
NNNNNNNNNNNNNNNNPPPPPNNPPPNPPPPPPNPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/7.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/7.java
Current actions:
INSERT:
15:if(shouldDeclareOnGlobalThis){
scopeToDeclareIn=scope.getGlobalScope();
}
TO:
14

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
15:if(shouldDeclareOnGlobalThis){
scopeToDeclareIn=scope.getGlobalScope();
}
TO:
14

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
16:scopeToDeclareIn=scope.getGlobalScope();
TO:
14

Following are 2th generated patches:
Validating 95 patches...
Tested:2533 patches
Compile failed:2074 patches
Compilation rate:0.18120805369127516
PPNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNPNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/8.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/8.java
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
16:if(oldVar!=null){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
return ;
}
TO:
14

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 15if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

INSERT:
18:return ;
TO:
17

DELETE:
Original line: 19else{
if(!inferred){
setDeferredType(n,type);
}
CompilerInput input=compiler.getInput(sourceName);
scopeToDeclareIn.declare(variableName,n,type,input,inferred);
if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}
if(scopeToDeclareIn.isGlobal()&&type instanceof FunctionType){
FunctionType fnType=(FunctionType)type;
if(fnType.isConstructor()||fnType.isInterface()){
FunctionType superClassCtor=fnType.getSuperClassConstructor();
scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
}
}
}

INSERT:
24:scopeToDeclareIn.declare(variableName,n,type,input,inferred);
TO:
18

Following are 2th generated patches:
Validating 4 patches...
Current actions:
DELETE:
Original line: 25if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}

INSERT:
25:if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}
TO:
18

Following are 3th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 19else{
if(!inferred){
setDeferredType(n,type);
}
CompilerInput input=compiler.getInput(sourceName);
scopeToDeclareIn.declare(variableName,n,type,input,inferred);
if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}
if(scopeToDeclareIn.isGlobal()&&type instanceof FunctionType){
FunctionType fnType=(FunctionType)type;
if(fnType.isConstructor()||fnType.isInterface()){
FunctionType superClassCtor=fnType.getSuperClassConstructor();
scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
}
}
}

INSERT:
20:if(!inferred){
setDeferredType(n,type);
}
TO:
18

INSERT:
35:if(scopeToDeclareIn.isGlobal()&&type instanceof FunctionType){
FunctionType fnType=(FunctionType)type;
if(fnType.isConstructor()||fnType.isInterface()){
FunctionType superClassCtor=fnType.getSuperClassConstructor();
scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
}
}
TO:
34

Following are 4th generated patches:
Validating 3 patches...
Current actions:
INSERT:
15:Var oldVar=scopeToDeclareIn.getVar(variableName);
TO:
14

INSERT:
16:if(oldVar!=null){
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
return ;
}
TO:
14

DELETE:
Original line: 16Var oldVar=scopeToDeclareIn.getVar(variableName);

DELETE:
Original line: 19else{
if(!inferred){
setDeferredType(n,type);
}
CompilerInput input=compiler.getInput(sourceName);
scopeToDeclareIn.declare(variableName,n,type,input,inferred);
if(shouldDeclareOnGlobalThis){
ObjectType globalThis=typeRegistry.getNativeObjectType(JSTypeNative.GLOBAL_THIS);
boolean isExtern=input.isExtern();
if(inferred){
globalThis.defineInferredProperty(variableName,type==null?getNativeType(JSTypeNative.NO_TYPE):type,isExtern);
}
else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
}
if(scopeToDeclareIn.isGlobal()&&type instanceof FunctionType){
FunctionType fnType=(FunctionType)type;
if(fnType.isConstructor()||fnType.isInterface()){
FunctionType superClassCtor=fnType.getSuperClassConstructor();
scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
}
}
}

INSERT:
20:if(!inferred){
setDeferredType(n,type);
}
TO:
18

INSERT:
23:CompilerInput input=compiler.getInput(sourceName);
TO:
18

INSERT:
31:else{
globalThis.defineDeclaredProperty(variableName,type,isExtern);
}
TO:
22

INSERT:
35:if(scopeToDeclareIn.isGlobal()&&type instanceof FunctionType){
FunctionType fnType=(FunctionType)type;
if(fnType.isConstructor()||fnType.isInterface()){
FunctionType superClassCtor=fnType.getSuperClassConstructor();
scopeToDeclareIn.declare(variableName+".prototype",n,fnType.getPrototype(),compiler.getInput(sourceName),superClassCtor==null||superClassCtor.getInstanceType().equals(getNativeType(OBJECT_TYPE)));
}
}
TO:
34

Tested:2748 patches
Compile failed:2282 patches
Compilation rate:0.16957787481804948
NNNNNNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/9.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/9.java
Current actions:
INSERT:
15:Scope parentScope=scope.getParent();
TO:
14

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
15:Scope parentScope=scope.getParent();
TO:
14

Following are 1th generated patches:
Validating 95 patches...
Tested:2844 patches
Compile failed:2375 patches
Compilation rate:0.1649085794655415
PNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/10.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_95/10.java
Current actions:
INSERT:
15:boolean declaredInCurrentScope=scope.isDeclared(variableName,false);
TO:
14

Following are 0th generated patches:
Validating 41 patches...
Current actions:
UPDATE
FROM:
15:if(scopeToDeclareIn.isDeclared(variableName,false)){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
17:if(declaredInCurrentScope){
Var oldVar=scope.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
21:if(declaredInGlobalScope){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
15

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
16:boolean declaredInGlobalScope=!declaredInCurrentScope&&scopeToDeclareIn.isDeclared(variableName,false);
TO:
14

INSERT:
18:Var oldVar=scope.getVar(variableName);
TO:
15

INSERT:
19:validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
TO:
15

INSERT:
21:if(declaredInGlobalScope){
Var oldVar=scopeToDeclareIn.getVar(variableName);
validator.expectUndeclaredVariable(sourceName,n,parent,oldVar,variableName,type);
}
TO:
15

Following are 3th generated patches:
Validating 200 patches...
Tested:3286 patches
Compile failed:2812 patches
Compilation rate:0.14424832623250153
NNNNNNNNNNNNNNNNNNPNNNNNNNNPNPNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Finish : closure-95 > patch : 0 | Start : Mon Apr 08 07:02:05 HKT 2024 | End : 2024.04.08 AD at 07:11:49 HKT
