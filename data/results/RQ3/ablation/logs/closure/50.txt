Repair : closure_50
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/0.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/0.java
Tested:0 patches
Compile failed:0 patches
Compilation rate:NaN

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/1.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/1.java
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

Following are 0th generated patches:
Validating 106 patches...
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

INSERT:
83:Node newString=Node.newString(joinString);
TO:
82

INSERT:
84:Node joinedString=new Node(Token.ADD,arrayFoldedChildren.get(0),newString);
TO:
82

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

INSERT:
85:for(int i=1;i<arrayFoldedChildren.size();i++){
joinedString=new Node(Token.ADD,joinedString,newString);
joinedString.addChildToBack(arrayFoldedChildren.get(i));
}
TO:
82

INSERT:
89:n.getParent().replaceChild(n,joinedString);
TO:
86

Following are 1th generated patches:
Validating 200 patches...
Tested:305 patches
Compile failed:189 patches
Compilation rate:0.380327868852459
NNNNNNNNNNNPNNNPPNNNNNNNPNNNNNNNPPNNNNNNNNNPNNPNNNNNNNNNNPNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNPNNPNPNNNNPNNNNNNNNPPPPPNPPNNNNNNPNPNPPNPNPPPNNPPNPNNPNNNPPNPPPNPNNNPPNNPNNPNNPNPPPNNPPPNNPNPNPPNNPPNNPNNPPPPNNPNNPNPNPNPNPPNNPNPNPNNPPNPNNPNNPPNPNPPPNNPNPNPPNNPPPNNPNPNNPNPPNPNNPNNNPPNNNPPNNNPNPPNNPNPNPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/2.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/2.java
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

Following are 0th generated patches:
Validating 63 patches...
Current actions:
DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

INSERT:
57:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
60

DELETE:
Original line: 58reportCodeChange();

INSERT:
58:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Following are 1th generated patches:
Validating 5 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

UPDATE
FROM:
59:return emptyStringNode;
TO:
55:return Node.newString("");

DELETE:
Original line: 58reportCodeChange();

Following are 2th generated patches:
Validating 3 patches...
Current actions:
UPDATE
FROM:
59:return emptyStringNode;
TO:
55:return Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

Following are 3th generated patches:
Validating 2 patches...
Current actions:
UPDATE
FROM:
59:return emptyStringNode;
TO:
55:return Node.newString("");

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

Following are 4th generated patches:
Validating 4 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

UPDATE
FROM:
59:return emptyStringNode;
TO:
55:return Node.newString("");

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

Tested:335 patches
Compile failed:200 patches
Compilation rate:0.40298507462686567
NNNNNNNPPPPPPNPPPNNPPPPPPPNPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/3.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/3.java
Current actions:
UPDATE
FROM:
18:String joinString=(right==null)?",":NodeUtil.getStringValue(right);
TO:
18:String joinString=right==null?",":NodeUtil.getStringValue(right);

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
18:String joinString=(right==null)?",":NodeUtil.getStringValue(right);
TO:
18:String joinString=right==null?",":NodeUtil.getStringValue(right);

Following are 1th generated patches:
Validating 200 patches...
Tested:536 patches
Compile failed:349 patches
Compilation rate:0.34888059701492535
PNNNNNPPPPPPPNPNNNPPPPPPPPNNNPNNPNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNPNNNNNNPPNPPPPPPNPNPPNPNNNNPPPPPPNPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/4.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/4.java
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
24:if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
arrayFoldedChildren.add(elem);
}
TO:
24

DELETE:
Original line: 25if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}

DELETE:
Original line: 42arrayFoldedChildren.add(elem);

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 26if(sb==null){
sb=new StringBuilder();
}

INSERT:
29:Node joinedNode=NodeUtil.joinStringNodes(prev,elem,joinString);
TO:
29

INSERT:
31:arrayFoldedChildren.add(joinedNode);
TO:
29

INSERT:
34:foldedSize+=InlineCostEstimator.getCost(elem);
TO:
34

INSERT:
35:arrayFoldedChildren.add(elem);
TO:
34

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

INSERT:
42:Node joinedNode=NodeUtil.joinStringNodes(prev,null,joinString);
TO:
46

INSERT:
43:foldedSize+=InlineCostEstimator.getCost(joinedNode);
TO:
46

INSERT:
44:arrayFoldedChildren.add(joinedNode);
TO:
46

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

Following are 4th generated patches:
Validating 200 patches...
Tested:1100 patches
Compile failed:753 patches
Compilation rate:0.31545454545454543
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPNNNPNNPPPPPPPPPNPPPPPPPPPPNNPNNNPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNPNPPNPNPPPNNPPPPPPPNNNPPPPNPPPPNNPNPPNPPPPPPPPPPPPPPPPPPPPPNPPPPNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPNPNNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/5.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/5.java
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
24:if(prev!=null&&prev.getType()==Token.STRING){
Node folded=Node.newString(prev.getString()+joinString+NodeUtil.getArrayElementStringValue(elem));
arrayFoldedChildren.add(folded);
prev=folded;
elem=elem.getNext();
continue;
}
TO:
25

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
31:}

TO:
28

INSERT:
32:if(prev==null){
prev=elem;
}
TO:
28

DELETE:
Original line: 44prev=elem;

Following are 2th generated patches:
Validating 38 patches...
Current actions:
INSERT:
42:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
arrayFoldedChildren.add(prev);
}
TO:
46

Following are 3th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

INSERT:
24:if(prev!=null&&prev.getType()==Token.STRING){
Node folded=Node.newString(prev.getString()+joinString+NodeUtil.getArrayElementStringValue(elem));
arrayFoldedChildren.add(folded);
prev=folded;
elem=elem.getNext();
continue;
}
TO:
25

DELETE:
Original line: 27sb=new StringBuilder();

DELETE:
Original line: 29else{
sb.append(joinString);
}

INSERT:
31:}

TO:
28

INSERT:
32:if(prev==null){
prev=elem;
}
TO:
28

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

UPDATE
FROM:
41:foldedSize+=InlineCostEstimator.getCost(elem);
TO:
36:foldedSize+=InlineCostEstimator.getCost(prev);

INSERT:
38:prev=elem;
TO:
42

INSERT:
42:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
arrayFoldedChildren.add(prev);
}
TO:
46

DELETE:
Original line: 44prev=elem;

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 49foldedSize+=sb.length()+2;

DELETE:
Original line: 50arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));

Following are 4th generated patches:
Validating 200 patches...
Tested:1929 patches
Compile failed:1453 patches
Compilation rate:0.24675997926386728
NNNNPPPPNPPPPPPPPPPPPPPPPPNNPPNPPNNPPPNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPPPPPPPPPPPPPPPPPNPNPPPPPPPPPPPPNPNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNNNNNPNNNNNNNNNNNPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPPNNNNNNNNPNNNNNNNNNNNNNPNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNPPPPPPPPPPPPPNPNNPNNNPPNPNPNPNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNPPNNNPPNNPNNNPNNPPPPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/6.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/6.java
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

Following are 0th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

INSERT:
52:foldedSize+=(arrayFoldedChildren.size()-1)*(joinString.length()+2);
TO:
51

Following are 1th generated patches:
Validating 176 patches...
Current actions:
INSERT:
52:foldedSize+=(arrayFoldedChildren.size()-1)*(joinString.length()+2);
TO:
51

Following are 2th generated patches:
Validating 175 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

Following are 3th generated patches:
Validating 1 patches...
Tested:2283 patches
Compile failed:1775 patches
Compilation rate:0.22251423565484013
PPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/7.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/7.java
Current actions:
DELETE:
Original line: 21int foldedSize=0;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
48:if(arrayFoldedChildren.size()<1){
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
}
TO:
51

INSERT:
56:}

TO:
51

DELETE:
Original line: 65arrayNode.detachChildren();

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

Following are 1th generated patches:
Validating 120 patches...
Current actions:
DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

INSERT:
48:if(arrayFoldedChildren.size()>1){
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
}
TO:
51

DELETE:
Original line: 49foldedSize+=sb.length()+2;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

INSERT:
54:reportCodeChange();
TO:
51

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
55:return n;
TO:
51

INSERT:
56:}

TO:
51

DELETE:
Original line: 90return n;

Following are 2th generated patches:
Validating 126 patches...
Current actions:
DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 37foldedSize+=sb.length()+2;

DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

DELETE:
Original line: 49foldedSize+=sb.length()+2;

INSERT:
55:return n;
TO:
51

DELETE:
Original line: 55case 0 :

INSERT:
56:}

TO:
51

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 59return emptyStringNode;

DELETE:
Original line: 60case 1 :

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

DELETE:
Original line: 66if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}

DELETE:
Original line: 72return foldedStringNode;

DELETE:
Original line: 73default :

DELETE:
Original line: 75return n;

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

DELETE:
Original line: 80if(foldedSize>originalSize){
return n;
}

DELETE:
Original line: 83arrayNode.detachChildren();

DELETE:
Original line: 87reportCodeChange();

DELETE:
Original line: 88break;

DELETE:
Original line: 90return n;

Following are 3th generated patches:
Validating 19 patches...
Current actions:
DELETE:
Original line: 37foldedSize+=sb.length()+2;

DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

INSERT:
48:if(arrayFoldedChildren.size()>1){
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
}
TO:
51

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

INSERT:
54:reportCodeChange();
TO:
51

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
55:return n;
TO:
51

INSERT:
56:}

TO:
51

DELETE:
Original line: 90return n;

Following are 4th generated patches:
Validating 126 patches...
Current actions:
DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 37foldedSize+=sb.length()+2;

DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

INSERT:
48:if(arrayFoldedChildren.size()>1){
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
}
TO:
51

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
56:}

TO:
51

Tested:2798 patches
Compile failed:2202 patches
Compilation rate:0.21300929235167976
NNNNNNNPPPPPPNPPNPPNPPPPPPPPNNPPNNPPPNPPPNNPNPPPPPPNPPNPPNPPPNPPNPPPPNPPPNPPPPPPPPPNPNNNNNPNNNNNPNNNNPNPNNPNNPNNNNNNNNNNNNPNNNNNPPPNPPPPPNPNPNPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/8.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/8.java
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

Following are 0th generated patches:
Validating 11 patches...
Current actions:
DELETE:
Original line: 78foldedSize+=kJoinOverhead;

Following are 1th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

Following are 2th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

Following are 3th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

Following are 4th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

Tested:2813 patches
Compile failed:2205 patches
Compilation rate:0.2161393530039104
NNNPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/9.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/9.java
Tested:2813 patches
Compile failed:2205 patches
Compilation rate:0.2161393530039104

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/10.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/10.java
Current actions:
DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
27:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
34

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
36:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
46

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 20StringBuilder sb=null;

INSERT:
24:foldedSize+=InlineCostEstimator.getCost(elem);
TO:
25

DELETE:
Original line: 26if(sb==null){
sb=new StringBuilder();
}

INSERT:
27:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
34

DELETE:
Original line: 29else{
sb.append(joinString);
}

INSERT:
31:foldedSize+=joinString.length();
TO:
41

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

INSERT:
36:if(prev!=null){
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
46

UPDATE
FROM:
52:foldedSize+=arrayFoldedChildren.size()-1;
TO:
40:foldedSize+=arrayNode.getChildCount()-1;

UPDATE
FROM:
54:switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}
TO:
41:switch (arrayNode.getChildCount()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayNode.getFirstChild();
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayNode.getChildCount()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
if(right!=null){
foldedSize+=InlineCostEstimator.getCost(right);
}
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayNode.children()){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 49foldedSize+=sb.length()+2;

UPDATE
FROM:
74:if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
TO:
61:if(arrayNode.getChildCount()==arrayNode.getChildCount()){
return n;
}

INSERT:
67:foldedSize+=InlineCostEstimator.getCost(right);
TO:
78

UPDATE
FROM:
84:for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
TO:
73:for(Node node : arrayNode.children()){
arrayNode.addChildToBack(node);
}

Tested:3413 patches
Compile failed:2689 patches
Compilation rate:0.21213009082918255
NNPPPPPPPPPPPPPPNPNPPNNNNNPPNNNNPNNNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNPNNNPNPNNNPNNPNNNNNNPNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/11.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/11.java
Current actions:
Wrap:
IfStatement
On:
[return n;]
Following are 0th generated patches:
Validating 14 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.size()!=arrayNode.getChildCount()){
return n;
}
TO:
51

DELETE:
Original line: 75return n;

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

Following are 2th generated patches:
Validating 3 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.size()!=arrayNode.getChildCount()){
return n;
}
TO:
51

DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

Following are 3th generated patches:
Validating 200 patches...
Tested:3822 patches
Compile failed:3077 patches
Compilation rate:0.19492412349555208
NNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNPNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/12.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/12.java
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
29:if(prev!=null){
foldedSize+=joinString.length();
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
34

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:if(prev!=null){
foldedSize+=joinString.length();
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
46

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

INSERT:
25:foldedSize+=InlineCostEstimator.getCost(elem);
TO:
25

INSERT:
26:arrayFoldedChildren.add(elem);
TO:
25

DELETE:
Original line: 27sb=new StringBuilder();

DELETE:
Original line: 29else{
sb.append(joinString);
}

INSERT:
29:if(prev!=null){
foldedSize+=joinString.length();
foldedSize+=InlineCostEstimator.getCost(prev);
}
TO:
34

UPDATE
FROM:
37:foldedSize+=sb.length()+2;
TO:
30:foldedSize+=joinString.length();

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

UPDATE
FROM:
49:foldedSize+=sb.length()+2;
TO:
40:foldedSize+=joinString.length();

INSERT:
41:foldedSize+=InlineCostEstimator.getCost(prev);
TO:
49

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

Following are 3th generated patches:
Validating 200 patches...
Tested:4621 patches
Compile failed:3690 patches
Compilation rate:0.20147154295607012
NPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPNPPPNPPNNPNNNNNNNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNPNNNPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNPPNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNPNPPPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/13.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/13.java
Current actions:
Wrap:
MethodDeclaration
On:
[List<Node> arrayFoldedChildren=Lists.newLinkedList();, return n;, String joinString=(right==null)?",":NodeUtil.getStringValue(right);, StringBuilder sb=null;, int foldedSize=0;, Node elem=arrayNode.getFirstChild();, while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}, {
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}, if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}, {
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}, else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, {
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, {
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}, if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}, {
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}, {
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}, foldedSize+=sb.length()+2;, foldedSize+=sb.length()+2;, sb=null;, sb=null;, foldedSize+=InlineCostEstimator.getCost(elem);, foldedSize+=InlineCostEstimator.getCost(elem);, arrayFoldedChildren.add(elem);, arrayFoldedChildren.add(elem);, elem=elem.getNext();, if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}, {
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}, foldedSize+=sb.length()+2;, foldedSize+=arrayFoldedChildren.size()-1;, int originalSize=InlineCostEstimator.getCost(n);]
Following are 0th generated patches:
Validating 63 patches...
Current actions:
INSERT:
2:private Node tryFoldArrayJoin(Node n){
Node callTarget=n.getFirstChild();
if(callTarget==null||!NodeUtil.isGetProp(callTarget)){
return n;
}
Node right=callTarget.getNext();
if(right!=null){
if(!NodeUtil.isImmutableValue(right)){
return n;
}
}
Node arrayNode=callTarget.getFirstChild();
Node functionName=arrayNode.getNext();
if((arrayNode.getType()!=Token.ARRAYLIT)||!functionName.getString().equals("join")){
return n;
}
String joinString=(right==null)?",":NodeUtil.getStringValue(right);
StringBuilder sb=null;
int foldedSize=0;
List<Node> arrayFoldedChildren=Lists.newLinkedList();
Node elem=arrayNode.getFirstChild();
while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
elem=elem.getNext();
}
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
}
foldedSize+=arrayFoldedChildren.size()-1;
int originalSize=InlineCostEstimator.getCost(n);
switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}
return n;
}
TO:
1

DELETE:
Original line: 16return n;

DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

UPDATE
FROM:
38:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
36:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));

UPDATE
FROM:
50:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
46:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:private Node tryFoldArrayJoin(Node n){
Node callTarget=n.getFirstChild();
if(callTarget==null||!NodeUtil.isGetProp(callTarget)){
return n;
}
Node right=callTarget.getNext();
if(right!=null){
if(!NodeUtil.isImmutableValue(right)){
return n;
}
}
Node arrayNode=callTarget.getFirstChild();
Node functionName=arrayNode.getNext();
if((arrayNode.getType()!=Token.ARRAYLIT)||!functionName.getString().equals("join")){
return n;
}
String joinString=(right==null)?",":NodeUtil.getStringValue(right);
StringBuilder sb=null;
int foldedSize=0;
List<Node> arrayFoldedChildren=Lists.newLinkedList();
Node elem=arrayNode.getFirstChild();
while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
elem=elem.getNext();
}
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
}
foldedSize+=arrayFoldedChildren.size()-1;
int originalSize=InlineCostEstimator.getCost(n);
switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}
return n;
}
TO:
1

DELETE:
Original line: 16return n;

DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

UPDATE
FROM:
38:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
36:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));

UPDATE
FROM:
50:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
46:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:private Node tryFoldArrayJoin(Node n){
Node callTarget=n.getFirstChild();
if(callTarget==null||!NodeUtil.isGetProp(callTarget)){
return n;
}
Node right=callTarget.getNext();
if(right!=null){
if(!NodeUtil.isImmutableValue(right)){
return n;
}
}
Node arrayNode=callTarget.getFirstChild();
Node functionName=arrayNode.getNext();
if((arrayNode.getType()!=Token.ARRAYLIT)||!functionName.getString().equals("join")){
return n;
}
String joinString=(right==null)?",":NodeUtil.getStringValue(right);
StringBuilder sb=null;
int foldedSize=0;
List<Node> arrayFoldedChildren=Lists.newLinkedList();
Node elem=arrayNode.getFirstChild();
while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
elem=elem.getNext();
}
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
}
foldedSize+=arrayFoldedChildren.size()-1;
int originalSize=InlineCostEstimator.getCost(n);
switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}
return n;
}
TO:
1

DELETE:
Original line: 16return n;

DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

Following are 3th generated patches:
Validating 5 patches...
Current actions:
INSERT:
2:private Node tryFoldArrayJoin(Node n){
Node callTarget=n.getFirstChild();
if(callTarget==null||!NodeUtil.isGetProp(callTarget)){
return n;
}
Node right=callTarget.getNext();
if(right!=null){
if(!NodeUtil.isImmutableValue(right)){
return n;
}
}
Node arrayNode=callTarget.getFirstChild();
Node functionName=arrayNode.getNext();
if((arrayNode.getType()!=Token.ARRAYLIT)||!functionName.getString().equals("join")){
return n;
}
String joinString=(right==null)?",":NodeUtil.getStringValue(right);
StringBuilder sb=null;
int foldedSize=0;
List<Node> arrayFoldedChildren=Lists.newLinkedList();
Node elem=arrayNode.getFirstChild();
while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
elem=elem.getNext();
}
if(sb!=null){
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));
}
foldedSize+=arrayFoldedChildren.size()-1;
int originalSize=InlineCostEstimator.getCost(n);
switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}
return n;
}
TO:
1

DELETE:
Original line: 16return n;

DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

UPDATE
FROM:
50:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
46:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(elem));

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

Following are 4th generated patches:
Validating 2 patches...
Tested:5061 patches
Compile failed:4104 patches
Compilation rate:0.1890930646117368
NNNNNNPPPPPPPPPNNPNNNNNNNNPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/14.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/14.java
Current actions:
UPDATE
FROM:
18:String joinString=(right==null)?",":NodeUtil.getStringValue(right);
TO:
18:String joinString=(right==null)?",":right.getString();

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
18:String joinString=(right==null)?",":NodeUtil.getStringValue(right);
TO:
18:String joinString=(right==null)?",":right.getString();

Following are 1th generated patches:
Validating 200 patches...
Tested:5262 patches
Compile failed:4298 patches
Compilation rate:0.18320030406689472
PNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/15.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/15.java
Current actions:
DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

Following are 0th generated patches:
Validating 41 patches...
Current actions:
UPDATE
FROM:
59:return emptyStringNode;
TO:
56:return Node.newString("");

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

INSERT:
58:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
60

INSERT:
59:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Following are 1th generated patches:
Validating 6 patches...
Current actions:
DELETE:
Original line: 58reportCodeChange();

INSERT:
59:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Following are 2th generated patches:
Validating 2 patches...
Current actions:
UPDATE
FROM:
59:return emptyStringNode;
TO:
56:return Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

INSERT:
58:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
60

INSERT:
59:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Following are 3th generated patches:
Validating 5 patches...
Current actions:
UPDATE
FROM:
59:return emptyStringNode;
TO:
56:return Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

INSERT:
58:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
60

INSERT:
59:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Following are 4th generated patches:
Validating 4 patches...
Current actions:
DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

INSERT:
58:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
60

INSERT:
59:if(foldedSize>originalSize){
return n;
}
TO:
60

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

Tested:5281 patches
Compile failed:4304 patches
Compilation rate:0.18500284037114184
NNNNNNPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/16.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/16.java
Current actions:
DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
18:if(right==null){
right=new Node(Token.STRING,",");
}
TO:
17

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
23:if(foldedStringNode==emptyStringNode){
return n;
}
TO:
17

INSERT:
35:}

TO:
17

INSERT:
63:}

TO:
46

DELETE:
Original line: 63return n;

INSERT:
70:}

TO:
46

INSERT:
72:}

TO:
46

INSERT:
78:}

TO:
51

Following are 2th generated patches:
Validating 62 patches...
Current actions:
INSERT:
26:if(foldedStringNode==arrayNode){
return n;
}
TO:
17

INSERT:
35:}

TO:
17

INSERT:
63:}

TO:
46

INSERT:
70:}

TO:
46

INSERT:
72:}

TO:
46

DELETE:
Original line: 75return n;

INSERT:
78:}

TO:
51

Following are 3th generated patches:
Validating 62 patches...
Current actions:
INSERT:
29:if(foldedStringNode!=null){
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
17

INSERT:
35:}

TO:
17

DELETE:
Original line: 58reportCodeChange();

INSERT:
63:}

TO:
46

DELETE:
Original line: 70n.getParent().replaceChild(n,foldedStringNode);

INSERT:
70:}

TO:
46

DELETE:
Original line: 72return foldedStringNode;

INSERT:
72:}

TO:
46

INSERT:
78:}

TO:
51

Following are 4th generated patches:
Validating 32 patches...
Current actions:
INSERT:
18:if(right==null){
right=new Node(Token.STRING,",");
}
TO:
17

INSERT:
21:Node emptyStringNode=Node.newString("");
TO:
17

DELETE:
Original line: 26if(sb==null){
sb=new StringBuilder();
}

INSERT:
35:}

TO:
17

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 59return emptyStringNode;

DELETE:
Original line: 60case 1 :

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

INSERT:
63:}

TO:
46

DELETE:
Original line: 68foldedStringNode=replacement;

INSERT:
70:}

TO:
46

INSERT:
72:}

TO:
46

DELETE:
Original line: 73default :

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

INSERT:
78:}

TO:
51

DELETE:
Original line: 80if(foldedSize>originalSize){
return n;
}

Tested:5818 patches
Compile failed:4741 patches
Compilation rate:0.18511515984874527
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNNNPPPPPPPNPNNPPPNNNPNPNNPPPPPPNPPPNNPNNNPPPNNNPNNPNPPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNPNNPPNPNPNNNPPNNNPPNNNNNNNNNNNPPNNPNPNNNPNPNPNNNNPNPNNNNNNPNPNNPNPNNPNNPNNPPNPNPNPNNNNNNPNPNPNNNPNNPNNPNNPNNNNNPNNPPNNNNNPNNPNNPPNPNNNPNNPNNPPNPNNPNPNNNNPNPNNPNNNNPNPNNPNNPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/17.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/17.java
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

Following are 0th generated patches:
Validating 36 patches...
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

INSERT:
84:newArrayNode.useSourceInfoIfMissingFromForTree(n);
TO:
82

INSERT:
85:n.getParent().replaceChild(n,newArrayNode);
TO:
82

DELETE:
Original line: 85arrayNode.addChildToBack(node);

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
83:Node newArrayNode=Node.newArray(arrayFoldedChildren).copyInformationFrom(arrayNode);
TO:
82

DELETE:
Original line: 83arrayNode.detachChildren();

INSERT:
84:newArrayNode.useSourceInfoIfMissingFromForTree(n);
TO:
82

DELETE:
Original line: 85arrayNode.addChildToBack(node);

Following are 2th generated patches:
Validating 200 patches...
Tested:6253 patches
Compile failed:5171 patches
Compilation rate:0.1730369422677115
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/18.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/18.java
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

Following are 0th generated patches:
Validating 21 patches...
Current actions:
INSERT:
83:Node newArrayNode=new Node(Token.ARRAYLIT,arrayFoldedChildren);
TO:
82

INSERT:
84:n.getParent().replaceChild(n,newArrayNode);
TO:
82

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
83:Node newArrayNode=new Node(Token.ARRAYLIT,arrayFoldedChildren);
TO:
82

DELETE:
Original line: 83arrayNode.detachChildren();

INSERT:
84:n.getParent().replaceChild(n,newArrayNode);
TO:
82

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

Following are 2th generated patches:
Validating 200 patches...
Tested:6674 patches
Compile failed:5491 patches
Compilation rate:0.17725501947857356
NNNNNNNNNNNNNNNNPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNPPNNPNNNNPNPNNNPNNNNPNNNNNNNNPNPNNNNPNPNNNPNNNPNNPNNNNPPNNNNNNNNPNPNNNNPNNNNPNNNNNNPNNPPNNNNPNNPNNNNNPNNNNPPNNNNNNNNPPNNNPPNNNNNPNPNNNNNNNPNNPNNNPNNNPNNNNNPNNNNNNPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNPNPPNNPPNNNPNNNNNNPPNNNNNPNNNNNNNNPNNNPNPNNPPNNNNNNPNNPNNNNNNPNPNNNNPNNPNNNNPNNNNPNNNPNNNPNNNNNNPNPNNNNNPNPNNNPPNNNNNPNNNPNPNPNNNNNNPNNNNNPNNNNNNPPNNNNPNNNNNNPPNNNNPNPNNPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/19.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/19.java
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.size()==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

DELETE:
Original line: 59return emptyStringNode;

INSERT:
71:}

TO:
56

Following are 1th generated patches:
Validating 186 patches...
Current actions:
DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 55case 0 :

INSERT:
58:int originalSize=InlineCostEstimator.getCost(n);
TO:
56

DELETE:
Original line: 60case 1 :

INSERT:
71:}

TO:
56

Following are 2th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

INSERT:
58:int originalSize=InlineCostEstimator.getCost(n);
TO:
56

INSERT:
59:int kJoinOverhead="[].join()".length();
TO:
56

INSERT:
60:foldedSize+=kJoinOverhead;
TO:
56

INSERT:
66:for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
TO:
56

DELETE:
Original line: 66if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}

INSERT:
69:reportCodeChange();
TO:
56

INSERT:
70:return n;
TO:
56

DELETE:
Original line: 71reportCodeChange();

INSERT:
71:}

TO:
56

DELETE:
Original line: 72return foldedStringNode;

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

DELETE:
Original line: 83arrayNode.detachChildren();

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

DELETE:
Original line: 88break;

DELETE:
Original line: 90return n;

Following are 3th generated patches:
Validating 10 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

INSERT:
52:if(arrayFoldedChildren.size()==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

INSERT:
58:int originalSize=InlineCostEstimator.getCost(n);
TO:
56

INSERT:
59:int kJoinOverhead="[].join()".length();
TO:
56

DELETE:
Original line: 59return emptyStringNode;

DELETE:
Original line: 60case 1 :

INSERT:
61:foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
TO:
56

INSERT:
62:if(foldedSize>originalSize){
return n;
}
TO:
56

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

INSERT:
65:arrayNode.detachChildren();
TO:
56

DELETE:
Original line: 65arrayNode.detachChildren();

INSERT:
66:for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
TO:
56

DELETE:
Original line: 66if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}

INSERT:
69:reportCodeChange();
TO:
56

INSERT:
70:return n;
TO:
56

DELETE:
Original line: 70n.getParent().replaceChild(n,foldedStringNode);

DELETE:
Original line: 71reportCodeChange();

INSERT:
71:}

TO:
56

DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

DELETE:
Original line: 79foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;

DELETE:
Original line: 81return n;

DELETE:
Original line: 84for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}

DELETE:
Original line: 87reportCodeChange();

DELETE:
Original line: 88break;

DELETE:
Original line: 90return n;

Following are 4th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

INSERT:
61:foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
TO:
56

INSERT:
71:}

TO:
56

DELETE:
Original line: 79foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;

DELETE:
Original line: 81return n;

DELETE:
Original line: 87reportCodeChange();

Tested:7113 patches
Compile failed:5904 patches
Compilation rate:0.1699704765921552
NNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPNNPPNPNNNPPPPPPPPPNNNNPNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/20.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/20.java
Current actions:
DELETE:
Original line: 65arrayNode.detachChildren();

Following are 0th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 65arrayNode.detachChildren();

Following are 0th generated patches:
Validating 1 patches...
Tested:7115 patches
Compile failed:5904 patches
Compilation rate:0.1702037947997189
PP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/21.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/21.java
Tested:7115 patches
Compile failed:5904 patches
Compilation rate:0.1702037947997189

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/22.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/22.java
Current actions:
UPDATE
FROM:
18:String joinString=(right==null)?",":NodeUtil.getStringValue(right);
TO:
18:String joinString=(right==null)?",":right.getString();

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
28:if(prev!=null){
arrayFoldedChildren.add(Node.newString(joinString).copyInformationFrom(prev));
}
TO:
34

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
36:if(prev!=null){
arrayFoldedChildren.add(Node.newString(joinString).copyInformationFrom(prev));
}
TO:
46

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
20:int originalSize=InlineCostEstimator.getCost(n);
TO:
19

DELETE:
Original line: 20StringBuilder sb=null;

INSERT:
39:int foldedSize=arrayFoldedChildren.size();
TO:
51

DELETE:
Original line: 41foldedSize+=InlineCostEstimator.getCost(elem);

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

INSERT:
77:}

TO:
56

Tested:7662 patches
Compile failed:6131 patches
Compilation rate:0.19981728008352911
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNNPNNPNNNNNPNPNNPNNNNNNPPPPPNPPPPPNPNPNNNPNNPPPPNPPPPPPPPPPPPNPPNPPNPPNNNPPNPNPPNNNNNNNNNNPNNNNNNNNNNNNNNPPPPNNNNPNPPPPPPPPPNPPPPNPNPPPPPNNNNPPPPPPPNPPPNNPNPNNPPPPPPNNPPPPPPPPPNNPPNNPPPPNPNPPPPPPNNPPPPNNPPPPPNNPPPNPPPPPPPPPPNPPNNNPPNNPNNPNNNPNNNNNNNNNNPNNPPPPPPNPPNNPNPPPPPPPPPPNPNNNPPPPPPNNPPPPPPPPPPPPPPPPPPNNNNPPPPPPPNPNPPPPPPPNPNPNPNPPNNPPPPPPPPNPPNNPPNNPPNPPPPNNPPPPPPPPPNPNNPNPPPPPNNPPPPPPNNPPPPPNPNPPNNPPPPPPNPPPPPPPNPPPPNNNPNNNNNNPNNPNPNNNNNNNNPNNPPPPPPPNNPPNNPPPPPPPPPPNPNNNPPPPPNPNPPPPPPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/23.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/23.java
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

Following are 0th generated patches:
Validating 41 patches...
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

INSERT:
83:Node joinNode=Node.newString("");
TO:
82

INSERT:
84:joinNode.addChildToFront(Node.newString("[").copyInformationFrom(callTarget));
TO:
82

INSERT:
85:joinNode.addChildToBack(Node.newString("]").copyInformationFrom(callTarget));
TO:
82

INSERT:
86:n.getParent().replaceChild(n,joinNode);
TO:
82

UPDATE
FROM:
85:arrayNode.addChildToBack(node);
TO:
88:joinNode.addChildToBack(node);

Following are 1th generated patches:
Validating 200 patches...
Tested:7902 patches
Compile failed:6255 patches
Compilation rate:0.20842824601366744
NNNNNNNNPPPPNPNPNNNNNPPPPNNNNNNNNNPPPPPPPNNNNNNNNPPPPPPPPNNPNNNNNNPNNNNPPPPNNPPNPNPPNNNNPPPPPPNNPNNPPNNNNPPNNPPNNPNPNPPNPNNPNPNPPNNPPPNPPNNNPPNPPNNPNPPNPPPNPNNNPNPNPNNPPPNPPNNPNNNPNNPPNNPPPNNPPNNPPPNNPNPNPPNPNNPPNNPPPNNNNNNNNNPPNPNPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/24.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/24.java
Current actions:
DELETE:
Original line: 21int foldedSize=0;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
49:if(arrayFoldedChildren.size()==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

DELETE:
Original line: 59return emptyStringNode;

INSERT:
81:}

TO:
56

Following are 1th generated patches:
Validating 196 patches...
Current actions:
INSERT:
55:if(arrayFoldedChildren.size()==1){
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(NodeUtil.isStringNode(foldedStringNode)){
if(cost>0){
return n;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
if(cost>0){
return n;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
56

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
57:if(NodeUtil.isStringNode(foldedStringNode)){
if(cost>0){
return n;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
56

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
58:if(cost<0){
return n;
}
TO:
56

DELETE:
Original line: 63return n;

INSERT:
81:}

TO:
56

Following are 4th generated patches:
Validating 16 patches...
Current actions:
INSERT:
67:if(cost<0){
return n;
}
TO:
56

DELETE:
Original line: 75return n;

INSERT:
81:}

TO:
56

Tested:8660 patches
Compile failed:6950 patches
Compilation rate:0.197459584295612
NNNNNNNNNNPPPPNPPPPNPNNNNPNNNNNNNPPPPNPPPPNPPPPNPNPPNPNNPNNNNNNPPNPPPPNPPNPPNNNPNNPPPPNPPPPNNPPNPNPNNPNNNPNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/25.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/25.java
Current actions:
Move
FROM:
Former Line 19:List<Node> arrayFoldedChildren=Lists.newLinkedList();
TO:
Current Line 2:Block

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
53:if(arrayFoldedChildren.size()==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

DELETE:
Original line: 59return emptyStringNode;

INSERT:
86:}

TO:
56

Following are 1th generated patches:
Validating 186 patches...
Current actions:
INSERT:
61:if(foldedSize<InlineCostEstimator.getCost(n)){
return n;
}
TO:
56

DELETE:
Original line: 63return n;

INSERT:
86:}

TO:
56

Following are 2th generated patches:
Validating 22 patches...
Current actions:
INSERT:
77:if(foldedSize<InlineCostEstimator.getCost(n)){
return n;
}
TO:
56

DELETE:
Original line: 81return n;

INSERT:
86:}

TO:
56

Following are 3th generated patches:
Validating 22 patches...
Current actions:
DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

INSERT:
20:List<Node> arrayFoldedChildren=Lists.newLinkedList();
TO:
20

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

INSERT:
53:if(arrayFoldedChildren.size()==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
59:else{
if(arrayFoldedChildren.size()==1){
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
}
TO:
56

INSERT:
73:if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
TO:
56

INSERT:
76:foldedSize+="[].join()".length()+2;
TO:
56

INSERT:
81:for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
TO:
56

INSERT:
84:reportCodeChange();
TO:
56

INSERT:
85:return n;
TO:
56

INSERT:
86:}

TO:
56

DELETE:
Original line: 90return n;

Following are 4th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
60:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
56

INSERT:
69:n.getParent().replaceChild(n,foldedStringNode);
TO:
56

INSERT:
71:return foldedStringNode;
TO:
56

INSERT:
85:return n;
TO:
56

INSERT:
86:}

TO:
56

DELETE:
Original line: 90return n;

Tested:9134 patches
Compile failed:7408 patches
Compilation rate:0.18896430917451282
NNNNNNNNNNNNNNNNNNNNNNNNNPPPNNPNNPNNNPNNPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/26.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/26.java
Current actions:
INSERT:
19:if(NodeUtil.getArrayLength(arrayNode)==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
18

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
19:if(NodeUtil.getArrayLength(arrayNode)==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
18

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
28:if(NodeUtil.getArrayElementStringValue(elem)==null){
oneString=false;
break;
}
TO:
18

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
19:if(NodeUtil.getArrayLength(arrayNode)==0){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
18

INSERT:
28:if(NodeUtil.getArrayElementStringValue(elem)==null){
oneString=false;
break;
}
TO:
18

Following are 4th generated patches:
Validating 200 patches...
Tested:9890 patches
Compile failed:8154 patches
Compilation rate:0.17553083923154703
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNPPNPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/27.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/27.java
Current actions:
DELETE:
Original line: 83arrayNode.detachChildren();

Following are 0th generated patches:
Validating 41 patches...
Current actions:
INSERT:
83:Node result=Node.newString("[");
TO:
82

UPDATE
FROM:
85:arrayNode.addChildToBack(node);
TO:
85:result.addChildToBack(node);

INSERT:
86:result.addChildToBack(Node.newString(joinString));
TO:
85

INSERT:
89:result.getParent().replaceChild(n,result);
TO:
86

Following are 1th generated patches:
Validating 200 patches...
Tested:10131 patches
Compile failed:8279 patches
Compilation rate:0.18280525120916
NNNNNNNNPPPPPPNNNNNNPNPPNPNNNNNNNNPPPPPPPNNNNNNNNPPPPPPPPNNNNNPNNNNPPNPPNPNPPPNNNPPNNPNNPPPNPNNPPNNPPNPNNNNPNPNPPPNPNPPNNPPNNPPNPNNPNPNPPNPNPPNNNPNPNPNPPPNNNPPPNNPNPNNNNPPNNPPPNNPPNPNNPPNPNPNPPNPNPNNPNNPPNPPNNPNNPNPNPPNNNNNNPPNPNNPPNPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/28.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/28.java
Current actions:
DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
29:if(right!=null){
foldedSize-=InlineCostEstimator.getCost(right);
}
TO:
46

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
54:if(node.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),node);
node=replacement;
}
TO:
83

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
19:int kJoinOverhead="[].join()".length();
TO:
18

INSERT:
20:int foldedSize=kJoinOverhead;
TO:
18

DELETE:
Original line: 20StringBuilder sb=null;

INSERT:
21:int originalSize=InlineCostEstimator.getCost(n);
TO:
18

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

INSERT:
24:foldedSize+=InlineCostEstimator.getCost(elem);
TO:
24

DELETE:
Original line: 26if(sb==null){
sb=new StringBuilder();
}

INSERT:
28:foldedSize-=InlineCostEstimator.getCost(arrayNode);
TO:
46

INSERT:
29:if(right!=null){
foldedSize-=InlineCostEstimator.getCost(right);
}
TO:
46

DELETE:
Original line: 30sb.append(joinString);

INSERT:
32:switch (arrayNode.getChildCount()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayNode.getFirstChild();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
foldedSize+=joinString.length()*(arrayNode.getChildCount()-1);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayNode.children()){
if(node.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),node);
node=replacement;
}
arrayNode.addChildToBack(node);
arrayNode.addChildToBack(Node.newString(joinString).copyInformationFrom(node));
}
reportCodeChange();
break;
}
TO:
51

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 34else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}

UPDATE
FROM:
61:Node foldedStringNode=arrayFoldedChildren.remove(0);
TO:
39:Node foldedStringNode=arrayNode.getFirstChild();

DELETE:
Original line: 44prev=elem;

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

Following are 3th generated patches:
Validating 200 patches...
Tested:10868 patches
Compile failed:8979 patches
Compilation rate:0.17381302907618698
NNNNNNNNNNNNNNNNNNNNNNNNNNNPPNPNPNNPNNNNNNPNNNNNNNNNNNNNNNNPNNNNNNPPPPPPPNPPPNNNPNPPPPPPPNPPNPNNNNNNNNNNPNNNPNNNNNNNNNPPNNNPNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/29.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/29.java
Current actions:
Wrap:
IfStatement
On:
[Node emptyStringNode=Node.newString("");, n.getParent().replaceChild(n,emptyStringNode);, reportCodeChange();, return emptyStringNode;]
Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.isEmpty()){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 57n.getParent().replaceChild(n,emptyStringNode);

DELETE:
Original line: 58reportCodeChange();

DELETE:
Original line: 59return emptyStringNode;

INSERT:
86:}

TO:
53

Following are 1th generated patches:
Validating 56 patches...
Current actions:
INSERT:
58:if(arrayFoldedChildren.size()==1){
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
51

Following are 2th generated patches:
Validating 188 patches...
Current actions:
INSERT:
60:if(foldedSize<InlineCostEstimator.getCost(n)){
return n;
}
TO:
51

DELETE:
Original line: 63return n;

INSERT:
86:}

TO:
53

Following are 3th generated patches:
Validating 22 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.isEmpty()){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
58:if(arrayFoldedChildren.size()==1){
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
51

INSERT:
74:int kJoinOverhead="[].join()".length();
TO:
53

INSERT:
76:foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
TO:
53

INSERT:
80:arrayNode.detachChildren();
TO:
53

INSERT:
81:for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
TO:
53

INSERT:
84:reportCodeChange();
TO:
53

INSERT:
85:return n;
TO:
53

INSERT:
86:}

TO:
53

DELETE:
Original line: 90return n;

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
52:if(arrayFoldedChildren.isEmpty()){
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
}
TO:
51

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

INSERT:
58:if(arrayFoldedChildren.size()==1){
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
}
TO:
51

INSERT:
74:int kJoinOverhead="[].join()".length();
TO:
53

INSERT:
75:foldedSize+=kJoinOverhead;
TO:
53

INSERT:
76:foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
TO:
53

INSERT:
77:if(foldedSize>originalSize){
return n;
}
TO:
53

INSERT:
84:reportCodeChange();
TO:
53

INSERT:
85:return n;
TO:
53

INSERT:
86:}

TO:
53

DELETE:
Original line: 90return n;

Tested:11361 patches
Compile failed:9446 patches
Compilation rate:0.1685591057125253
NNNNNNNPPPPPPPNPNNNNNNPNPNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNNNNNNNNPNNPNNPNPNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/30.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/30.java
Current actions:
DELETE:
Original line: 21int foldedSize=0;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
48:sb.append(joinString);
TO:
48

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
36:sb.append(joinString);
TO:
36

INSERT:
37:sb.append(NodeUtil.getArrayElementStringValue(elem));
TO:
36

DELETE:
Original line: 49foldedSize+=sb.length()+2;

DELETE:
Original line: 65arrayNode.detachChildren();

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
36:sb.append(joinString);
TO:
36

INSERT:
37:sb.append(NodeUtil.getArrayElementStringValue(elem));
TO:
36

DELETE:
Original line: 37foldedSize+=sb.length()+2;

INSERT:
49:sb.append(NodeUtil.getArrayElementStringValue(prev));
TO:
48

UPDATE
FROM:
50:arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
TO:
50:arrayFoldedChildren.add(Node.newString(sb.toString()));

Following are 3th generated patches:
Validating 200 patches...
Tested:12161 patches
Compile failed:9806 patches
Compilation rate:0.1936518378422827
NNPPPPPPPPPPNPPPPPPPNPPPNNPPPPPPPPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNPPPPPPPPNPPPPPPPPPPPPNPPPPPPPPPPPPPNPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPNPPPPPPNNNNNNNNNNNNPPPPPNPNNPPPNNNNNNPNNNNPPNPPPPPPNNPPNPPPNPNNPNNNPNNNPNNNPPNPPNPNPPPNPPNNPPPPNNPNPPPPNNPPNPPPNNNNNNNNPPNPPNPNPPNPNPPNPPPNPPNPPPNNPNPPPPPNPNNPPNNPNPPPPPNPNPNPPPNPPPPNPPNPNPPPPPNPNPPNPPPPPPPPNNNNNNNNNNNNPPPPPNPPNPNNNPNNPNNNNNNPPNPPPPPPNPNPNPPPPNNNPNNNNNPPNNNPNNPPPNPNPPPNPPNNPPPPNNPNPPPNPNPPPNNPPNNNNNPNPPPNNNNPPNPNPPPPNPPNPPNPPPNNPNPPPNPPNPNPPNPNNPPPPNPPPNPPNNPPPPPNPPNNPPPPPPNNPPPNPPPPPPPPNNNNNNNNNNNNPPPNPPPNPNPNNNPNNNNNPNNPPPNPPPPNPNPPNPPPPNNNNNNNPNNNPNPPPPNNNPPPPNPNPPNNPPPNPNPPPPNNPPNPNPPNPNNNNNNNNPPPPNPNPPNPNPPPPNNPPPPNNPPNPNPPPNPPPPNPNPNNNPPPPPPNPNNPPNPPPPPPPNPPNNPPPPNPPPNPNPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/31.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/31.java
Current actions:
INSERT:
18:if(right!=null){
String joinString=NodeUtil.getStringValue(right);
boolean isSimpleString=true;
for(int i=0;i<joinString.length();i++){
char ch=joinString.charAt(i);
if(ch=='"'||ch=='\\'){
isSimpleString=false;
break;
}
}
if(isSimpleString){
int foldedSize=0;
for(Node elem : arrayNode.children()){
foldedSize+=elem.getString().length();
}
int joinStringLength=joinString.length();
foldedSize+=(arrayNode.getChildCount()-1)*joinStringLength;
foldedSize+="[].join()".length();
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
String joined=Joiner.on(joinString).join(arrayNode.getStrings());
Node replacement=Node.newString(joined);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
}
TO:
17

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
18:if(right!=null){
String joinString=NodeUtil.getStringValue(right);
boolean isSimpleString=true;
for(int i=0;i<joinString.length();i++){
char ch=joinString.charAt(i);
if(ch=='"'||ch=='\\'){
isSimpleString=false;
break;
}
}
if(isSimpleString){
int foldedSize=0;
for(Node elem : arrayNode.children()){
foldedSize+=elem.getString().length();
}
int joinStringLength=joinString.length();
foldedSize+=(arrayNode.getChildCount()-1)*joinStringLength;
foldedSize+="[].join()".length();
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
String joined=Joiner.on(joinString).join(arrayNode.getStrings());
Node replacement=Node.newString(joined);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
}
TO:
17

Following are 1th generated patches:
Validating 44 patches...
Current actions:
INSERT:
23:if(ch=='"'||ch=='\\'){
isSimpleString=false;
break;
}
TO:
17

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
28:if(isSimpleString){
int foldedSize=0;
for(Node elem : arrayNode.children()){
foldedSize+=elem.getString().length();
}
int joinStringLength=joinString.length();
foldedSize+=(arrayNode.getChildCount()-1)*joinStringLength;
foldedSize+="[].join()".length();
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
String joined=Joiner.on(joinString).join(arrayNode.getStrings());
Node replacement=Node.newString(joined);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
TO:
17

Following are 3th generated patches:
Validating 4 patches...
Current actions:
INSERT:
36:if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
TO:
17

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
19:String joinString=NodeUtil.getStringValue(right);
TO:
17

INSERT:
20:boolean isSimpleString=true;
TO:
17

INSERT:
22:char ch=joinString.charAt(i);
TO:
17

INSERT:
23:if(ch=='"'||ch=='\\'){
isSimpleString=false;
break;
}
TO:
17

INSERT:
28:if(isSimpleString){
int foldedSize=0;
for(Node elem : arrayNode.children()){
foldedSize+=elem.getString().length();
}
int joinStringLength=joinString.length();
foldedSize+=(arrayNode.getChildCount()-1)*joinStringLength;
foldedSize+="[].join()".length();
if(foldedSize>InlineCostEstimator.getCost(n)){
return n;
}
String joined=Joiner.on(joinString).join(arrayNode.getStrings());
Node replacement=Node.newString(joined);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
TO:
17

Tested:12809 patches
Compile failed:10450 patches
Compilation rate:0.18416738230931376
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/32.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/32.java
Current actions:
DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
22:if(value==null){
return n;
}
TO:
18

INSERT:
35:}

TO:
51

DELETE:
Original line: 63return n;

Following are 1th generated patches:
Validating 40 patches...
Current actions:
INSERT:
26:if(elem.getNext()!=null){
sb.append(joinString);
}
TO:
33

DELETE:
Original line: 30sb.append(joinString);

INSERT:
35:}

TO:
51

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
20:for(Node elem : NodeUtil.findLhsNodesInNode(arrayNode)){
String value=NodeUtil.getArrayElementStringValue(elem);
if(value==null){
return n;
}
sb.append(value);
if(elem.getNext()!=null){
sb.append(joinString);
}
}
TO:
18

DELETE:
Original line: 22Node prev=null;

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

INSERT:
31:Node parent=n.getParent();
TO:
51

INSERT:
32:parent.replaceChild(n,foldedStringNode);
TO:
51

INSERT:
34:return foldedStringNode;
TO:
51

INSERT:
35:}

TO:
51

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 50arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

Following are 3th generated patches:
Validating 200 patches...
Tested:13433 patches
Compile failed:11032 patches
Compilation rate:0.17873892652423137
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNPNNNNNNNNNNNNNNPNPPPPPPPPPNNNNPNNPPPPPNPPNNPPNPPPPNPPPPPNPNNNNPNNNNNPNNNNNNPNPPNNNNNNPPNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/33.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/33.java
Current actions:
Wrap:
MethodDeclaration
On:
[return n;, elem=elem.getNext();, return n;, String joinString=(right==null)?",":NodeUtil.getStringValue(right);, Node prev=null;, Node elem=arrayNode.getFirstChild();, while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}, {
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}, if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}, {
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}, else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, {
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}, {
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}]
Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
23:if(prev!=null){
Node joined=NodeUtil.newStringNode(elem,"\""+joinString+NodeUtil.getArrayElementStringValue(prev)+"\"");
prev.getParent().replaceChild(prev,joined);
reportCodeChange();
return joined;
}
TO:
25

Following are 1th generated patches:
Validating 36 patches...
Current actions:
INSERT:
2:private Node tryFoldArrayJoin(Node n){
Node callTarget=n.getFirstChild();
if(callTarget==null||!NodeUtil.isGetProp(callTarget)){
return n;
}
Node right=callTarget.getNext();
if(right!=null){
if(!NodeUtil.isImmutableValue(right)){
return n;
}
}
Node arrayNode=callTarget.getFirstChild();
Node functionName=arrayNode.getNext();
if((arrayNode.getType()!=Token.ARRAYLIT)||!functionName.getString().equals("join")){
return n;
}
String joinString=(right==null)?",":NodeUtil.getStringValue(right);
Node prev=null;
Node elem=arrayNode.getFirstChild();
while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(prev!=null){
Node joined=NodeUtil.newStringNode(elem,"\""+joinString+NodeUtil.getArrayElementStringValue(prev)+"\"");
prev.getParent().replaceChild(prev,joined);
reportCodeChange();
return joined;
}
}
else{
prev=elem;
}
elem=elem.getNext();
}
return n;
}
TO:
1

DELETE:
Original line: 16return n;

DELETE:
Original line: 18String joinString=(right==null)?",":NodeUtil.getStringValue(right);

DELETE:
Original line: 19List<Node> arrayFoldedChildren=Lists.newLinkedList();

DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 22Node prev=null;

INSERT:
23:if(prev!=null){
Node joined=NodeUtil.newStringNode(elem,"\""+joinString+NodeUtil.getArrayElementStringValue(prev)+"\"");
prev.getParent().replaceChild(prev,joined);
reportCodeChange();
return joined;
}
TO:
25

DELETE:
Original line: 23Node elem=arrayNode.getFirstChild();

DELETE:
Original line: 24while(elem!=null){
if(NodeUtil.isImmutableValue(elem)||elem.getType()==Token.EMPTY){
if(sb==null){
sb=new StringBuilder();
}
else{
sb.append(joinString);
}
sb.append(NodeUtil.getArrayElementStringValue(elem));
}
else{
if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}
foldedSize+=InlineCostEstimator.getCost(elem);
arrayFoldedChildren.add(elem);
}
prev=elem;
elem=elem.getNext();
}

INSERT:
30:else{
prev=elem;
}
TO:
33

DELETE:
Original line: 47if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
}

DELETE:
Original line: 54switch (arrayFoldedChildren.size()){
case 0 :
Node emptyStringNode=Node.newString("");
n.getParent().replaceChild(n,emptyStringNode);
reportCodeChange();
return emptyStringNode;
case 1 :
Node foldedStringNode=arrayFoldedChildren.remove(0);
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
if(foldedStringNode.getType()!=Token.STRING){
Node replacement=new Node(Token.ADD,Node.newString("").copyInformationFrom(n),foldedStringNode);
foldedStringNode=replacement;
}
n.getParent().replaceChild(n,foldedStringNode);
reportCodeChange();
return foldedStringNode;
default :
if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}
int kJoinOverhead="[].join()".length();
foldedSize+=kJoinOverhead;
foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;
if(foldedSize>originalSize){
return n;
}
arrayNode.detachChildren();
for(Node node : arrayFoldedChildren){
arrayNode.addChildToBack(node);
}
reportCodeChange();
break;
}

DELETE:
Original line: 90return n;

Following are 2th generated patches:
Validating 48 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 36Preconditions.checkNotNull(prev);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

DELETE:
Original line: 68foldedStringNode=replacement;

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

DELETE:
Original line: 79foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;

Following are 3th generated patches:
Validating 6 patches...
Current actions:
DELETE:
Original line: 21int foldedSize=0;

DELETE:
Original line: 27sb=new StringBuilder();

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 53int originalSize=InlineCostEstimator.getCost(n);

DELETE:
Original line: 63return n;

DELETE:
Original line: 70n.getParent().replaceChild(n,foldedStringNode);

DELETE:
Original line: 73default :

DELETE:
Original line: 74if(arrayFoldedChildren.size()==arrayNode.getChildCount()){
return n;
}

Following are 4th generated patches:
Validating 10 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 21int foldedSize=0;

INSERT:
23:if(prev!=null){
Node joined=NodeUtil.newStringNode(elem,"\""+joinString+NodeUtil.getArrayElementStringValue(prev)+"\"");
prev.getParent().replaceChild(prev,joined);
reportCodeChange();
return joined;
}
TO:
25

DELETE:
Original line: 30sb.append(joinString);

DELETE:
Original line: 32sb.append(NodeUtil.getArrayElementStringValue(elem));

DELETE:
Original line: 35if(sb!=null){
Preconditions.checkNotNull(prev);
foldedSize+=sb.length()+2;
arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));
sb=null;
}

DELETE:
Original line: 52foldedSize+=arrayFoldedChildren.size()-1;

DELETE:
Original line: 55case 0 :

DELETE:
Original line: 56Node emptyStringNode=Node.newString("");

DELETE:
Original line: 58reportCodeChange();

DELETE:
Original line: 60case 1 :

DELETE:
Original line: 61Node foldedStringNode=arrayFoldedChildren.remove(0);

DELETE:
Original line: 62if(foldedSize>originalSize){
return n;
}

DELETE:
Original line: 65arrayNode.detachChildren();

DELETE:
Original line: 68foldedStringNode=replacement;

DELETE:
Original line: 70n.getParent().replaceChild(n,foldedStringNode);

DELETE:
Original line: 71reportCodeChange();

DELETE:
Original line: 72return foldedStringNode;

DELETE:
Original line: 77int kJoinOverhead="[].join()".length();

DELETE:
Original line: 78foldedSize+=kJoinOverhead;

DELETE:
Original line: 79foldedSize+=(right!=null)?InlineCostEstimator.getCost(right):0;

DELETE:
Original line: 81return n;

DELETE:
Original line: 83arrayNode.detachChildren();

DELETE:
Original line: 87reportCodeChange();

Tested:13645 patches
Compile failed:11205 patches
Compilation rate:0.1788200806156101
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPPNNNNNNNNNNNNNNNNNPNNNNNPNNNNNNNNNNNNPNNNNPNPNNPPNPPNPNPPPNNPPPNPPPPPNPPNPPPNPPNPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/34.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_50/34.java
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
29:if(prev!=null){
foldedSize+=joinString.length()+2;
}
TO:
34

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(prev!=null){
foldedSize+=joinString.length()+2;
}
TO:
46

Following are 2th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 20StringBuilder sb=null;

DELETE:
Original line: 26if(sb==null){
sb=new StringBuilder();
}

INSERT:
26:arrayFoldedChildren.add(elem);
TO:
32

INSERT:
29:if(prev!=null){
foldedSize+=joinString.length()+2;
}
TO:
34

UPDATE
FROM:
37:foldedSize+=sb.length()+2;
TO:
30:foldedSize+=joinString.length()+2;

DELETE:
Original line: 38arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));

INSERT:
38:if(prev!=null){
foldedSize+=joinString.length()+2;
}
TO:
46

DELETE:
Original line: 39sb=null;

DELETE:
Original line: 48Preconditions.checkNotNull(prev);

DELETE:
Original line: 50arrayFoldedChildren.add(Node.newString(sb.toString()).copyInformationFrom(prev));

Following are 3th generated patches:
Validating 200 patches...
Tested:14443 patches
Compile failed:11818 patches
Compilation rate:0.18174894412518175
NPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPNNNPPNPPPPNNNPNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPPPNNNNNNNNPPNNPPPNPPNPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNPPPPNPNPNNNNPPNNNNNNNNNPPNPNPNPPNPNNNNPNNNNNPNNNNNNPNNNPNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNPNPNNPPPNPPNPNNNNNPNNNPNNNNNPPNNPPPPNNNNNNPNNNNNNNNPNNPNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Finish : closure-50 > patch : 0 | Start : Sat Apr 06 15:44:12 HKT 2024 | End : 2024.04.06 AD at 16:32:48 HKT
