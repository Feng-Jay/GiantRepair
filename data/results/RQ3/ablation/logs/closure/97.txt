Repair : closure_97
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/0.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/0.java
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(rvalInt==0||(!left.isNumber()&&n.getType()==Token.RSH)){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
46:return n;
TO:
44

INSERT:
47:}

TO:
44

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:return n;
TO:
44

INSERT:
47:}

TO:
44

Following are 3th generated patches:
Validating 18 patches...
Tested:421 patches
Compile failed:421 patches
Compilation rate:0.0
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/1.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/1.java
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
33:result=(long)lvalInt>>>rvalInt;

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
33:result=(long)lvalInt>>>rvalInt;

Following are 1th generated patches:
Validating 44 patches...
Tested:466 patches
Compile failed:459 patches
Compilation rate:0.015021459227467811
PNNNNNPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNPNNPNPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/2.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/2.java
Tested:466 patches
Compile failed:459 patches
Compilation rate:0.015021459227467811

Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/3.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/3.java
Current actions:
INSERT:
43:else{
if(left.getType()==Token.STRING&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
String s=left.getString();
int lvalInt=0;
int length=s.length();
for(int i=0;i<length;i++){
int ch=s.charAt(i);
if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
lvalInt=(lvalInt<<rvalInt)|ch;
}
Node newNumber=Node.newNumber(lvalInt);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
41

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
41

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
55:if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
TO:
41

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
42:}

TO:
41

INSERT:
43:else{
if(left.getType()==Token.STRING&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
String s=left.getString();
int lvalInt=0;
int length=s.length();
for(int i=0;i<length;i++){
int ch=s.charAt(i);
if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
lvalInt=(lvalInt<<rvalInt)|ch;
}
Node newNumber=Node.newNumber(lvalInt);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
41

Following are 3th generated patches:
Validating 1 patches...
Current actions:
INSERT:
42:}

TO:
41

INSERT:
46:if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
41

INSERT:
50:String s=left.getString();
TO:
41

INSERT:
52:int length=s.length();
TO:
41

INSERT:
53:for(int i=0;i<length;i++){
int ch=s.charAt(i);
if(ch<0||ch>=0x10000){
error(NON_BMP_CHAR,left);
return n;
}
lvalInt=(lvalInt<<rvalInt)|ch;
}
TO:
41

INSERT:
63:reportCodeChange();
TO:
41

Following are 4th generated patches:
Validating 200 patches...
Tested:1257 patches
Compile failed:1250 patches
Compilation rate:0.005568814638027049
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/4.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/4.java
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

INSERT:
41:else{
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
29

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(lvalInt<0){
long lvalLong=lvalInt;
switch (n.getType()){
case Token.LSH :
result=lvalLong<<rvalInt;
break;
case Token.RSH :
result=lvalLong>>rvalInt;
break;
case Token.URSH :
result=lvalLong>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
}
TO:
24

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

INSERT:
42:switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
29

Following are 3th generated patches:
Validating 200 patches...
Tested:1944 patches
Compile failed:1923 patches
Compilation rate:0.010802469135802469
NNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNNNNPNNPNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/5.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/5.java
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 131 patches...
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(!NodeUtil.isConstantValue(left)||!NodeUtil.isConstantValue(right)){
return n;
}
TO:
42

INSERT:
46:switch (n.getType()){
case Token.LSH :
return Node.newNumber(left.getDouble()<<right.getDouble());
case Token.RSH :
return Node.newNumber(left.getDouble()>>right.getDouble());
case Token.URSH :
return Node.newNumber((long)left.getDouble()>>>right.getDouble());
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
44

INSERT:
56:}

TO:
44

Following are 2th generated patches:
Validating 200 patches...
Tested:2475 patches
Compile failed:2454 patches
Compilation rate:0.008484848484848486
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/6.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/6.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER&&(int)right.getDouble()==right.getDouble()){
Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER&&(int)right.getDouble()==right.getDouble()){
Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
47:return newNumber;
TO:
42

Following are 2th generated patches:
Validating 69 patches...
Current actions:
INSERT:
44:Node newNumber=Node.newNumber(left.getDouble()>>(int)right.getDouble());
TO:
42

INSERT:
47:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

Following are 4th generated patches:
Validating 50 patches...
Current actions:
INSERT:
46:reportCodeChange();
TO:
42

Tested:3008 patches
Compile failed:2986 patches
Compilation rate:0.007313829787234043
NNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/7.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/7.java
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

Following are 0th generated patches:
Validating 16 patches...
Current actions:
INSERT:
44:if(replacement!=null){
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
TO:
42

Following are 1th generated patches:
Validating 38 patches...
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

INSERT:
45:n.getParent().replaceChild(n,replacement);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return replacement;
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:Node replacement=caseShift(n.getType(),left,right);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return replacement;
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:3462 patches
Compile failed:3439 patches
Compilation rate:0.006643558636626227
NNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/8.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/8.java
Current actions:
DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

Following are 0th generated patches:
Validating 5 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
44:}

TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber((int)result);
TO:
37

INSERT:
44:}

TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:4066 patches
Compile failed:4025 patches
Compilation rate:0.010083620265617314
NNPPNNNNNNNNNNNNPNPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNPNNNNNNNNPNNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/9.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/9.java
Current actions:
INSERT:
38:if(result<Integer.MIN_VALUE||result>Integer.MAX_VALUE){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
38:if(result<Integer.MIN_VALUE||result>Integer.MAX_VALUE){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber(result);
TO:
37

INSERT:
40:n.getParent().replaceChild(n,newNumber);
TO:
37

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node newNumber=Node.newNumber(result);
TO:
37

INSERT:
41:reportCodeChange();
TO:
37

INSERT:
42:return newNumber;
TO:
37

Following are 3th generated patches:
Validating 200 patches...
Tested:4681 patches
Compile failed:4622 patches
Compilation rate:0.012604144413586841
NNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNPNPPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNNPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/10.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/10.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER&&right.getDouble()<0){
int bits=(int)Math.ceil(-right.getDouble());
if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 28 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER&&right.getDouble()<0){
int bits=(int)Math.ceil(-right.getDouble());
if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 16 patches...
Current actions:
INSERT:
47:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
49:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 70 patches...
Current actions:
INSERT:
44:int bits=(int)Math.ceil(-right.getDouble());
TO:
42

INSERT:
45:if(bits<32){
Node newNumber=Node.newNumber(left.getDouble()<<bits);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 4th generated patches:
Validating 60 patches...
Current actions:
INSERT:
44:int bits=(int)Math.ceil(-right.getDouble());
TO:
42

Tested:5053 patches
Compile failed:4991 patches
Compilation rate:0.012269938650306749
NNNNNNNNNNNNNNNNNPNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/11.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/11.java
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

Following are 0th generated patches:
Validating 23 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 11if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

DELETE:
Original line: 13return n;

Following are 2th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 9return n;

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

Following are 3th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

DELETE:
Original line: 12error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);

Following are 4th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 7if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}

Tested:5080 patches
Compile failed:4991 patches
Compilation rate:0.01751968503937008
PPPPPPPPPPPPPPPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/12.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/12.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&left.getDouble()==(1L<<53)&&right.getType()==Token.NUMBER&&right.getDouble()==0){
Node newNumber=Node.newNumber(Math.pow(2,53));
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 15 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&left.getDouble()==(1L<<53)&&right.getType()==Token.NUMBER&&right.getDouble()==0){
Node newNumber=Node.newNumber(Math.pow(2,53));
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

Following are 2th generated patches:
Validating 50 patches...
Current actions:
INSERT:
44:Node newNumber=Node.newNumber(Math.pow(2,53));
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

INSERT:
47:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:Node newNumber=Node.newNumber(Math.pow(2,53));
TO:
42

INSERT:
45:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
47:return newNumber;
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:5745 patches
Compile failed:5634 patches
Compilation rate:0.019321148825065273
NNNNNNNNNPPPPPPNNNNNNNNNNNNNNNNNNPNPPNNPNNNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNPNNNPNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/13.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/13.java
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

Following are 0th generated patches:
Validating 32 patches...
Current actions:
INSERT:
41:if(n.getType()==Token.RSH&&lval<0){
replacement=addBranchAfter(newNumber,replacement,true);
replacement=IR.ifNode(IR.lt(newNumber,Node.newNumber(0)),replacement);
}
TO:
40

Following are 1th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
41:if(n.getType()==Token.RSH&&lval<0){
replacement=addBranchAfter(newNumber,replacement,true);
replacement=IR.ifNode(IR.lt(newNumber,Node.newNumber(0)),replacement);
}
TO:
40

UPDATE
FROM:
41:return newNumber;
TO:
45:return replacement;

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node replacement=n.getParent().replaceChild(n,newNumber);
TO:
38

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
41:if(n.getType()==Token.RSH&&lval<0){
replacement=addBranchAfter(newNumber,replacement,true);
replacement=IR.ifNode(IR.lt(newNumber,Node.newNumber(0)),replacement);
}
TO:
40

UPDATE
FROM:
41:return newNumber;
TO:
45:return replacement;

Following are 3th generated patches:
Validating 200 patches...
Tested:6374 patches
Compile failed:6262 patches
Compilation rate:0.017571383746470035
NNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/14.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/14.java
Current actions:
INSERT:
25:if(n.getType()==Token.URSH){
lvalInt=Integer.toUnsignedLong(lvalInt);
}
TO:
24

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
25:if(n.getType()==Token.URSH){
lvalInt=Integer.toUnsignedLong(lvalInt);
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
26:lvalInt=Integer.toUnsignedLong(lvalInt);
TO:
24

Following are 2th generated patches:
Validating 51 patches...
Tested:6627 patches
Compile failed:6515 patches
Compilation rate:0.016900558322015997
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/15.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/15.java
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

Following are 0th generated patches:
Validating 14 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

Following are 1th generated patches:
Validating 46 patches...
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 2th generated patches:
Validating 140 patches...
Current actions:
INSERT:
25:Long l=Long.valueOf(lval);
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 3th generated patches:
Validating 94 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
28:result=l<<rvalInt;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
31:result=l>>rvalInt;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Following are 4th generated patches:
Validating 138 patches...
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
34:result=l>>>rvalInt;

Tested:7052 patches
Compile failed:6938 patches
Compilation rate:0.016165626772546796
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/16.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/16.java
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 8 patches...
Tested:7061 patches
Compile failed:6938 patches
Compilation rate:0.017419628947741114
PPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/17.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/17.java
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 0th generated patches:
Validating 45 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
44:JSType type=n.getJSType();
TO:
37

INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
51:}

TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(result>=Integer.MIN_VALUE&&result<=Integer.MAX_VALUE){
Node newNumber=Node.newNumber((int)result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
45:if(type!=null&&type.isDouble()){
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
37

INSERT:
51:}

TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:7906 patches
Compile failed:7741 patches
Compilation rate:0.020870225145459144
NNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNPNNPPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNNNPNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPNNPNNPNPNNPPNNNNPPPNNNNNNPNNPNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/18.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/18.java
Current actions:
INSERT:
39:newNumber.useSourceInfoIfMissingFromForTree(n);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.useSourceInfoIfMissingFromForTree(n);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:8107 patches
Compile failed:7942 patches
Compilation rate:0.0203527815468114
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/19.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/19.java
Current actions:
INSERT:
25:if(rvalInt==0){
return n;
}
TO:
24

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
25:if(rvalInt==0){
return n;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
26:return n;
TO:
24

Following are 2th generated patches:
Validating 22 patches...
Tested:8331 patches
Compile failed:8159 patches
Compilation rate:0.020645780818629215
NPNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/20.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/20.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(rvalInt==0){
return left;
}
}
TO:
42

Following are 0th generated patches:
Validating 133 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(rvalInt==0){
return left;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

INSERT:
46:error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
TO:
42

INSERT:
47:return n;
TO:
42

INSERT:
49:int rvalInt=(int)rval;
TO:
42

INSERT:
51:error(FRACTIONAL_BITWISE_OPERAND,right);
TO:
42

INSERT:
55:return left;
TO:
42

Tested:8854 patches
Compile failed:8662 patches
Compilation rate:0.021685114072735486
NNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNPNNNNNPNNNNNNNNNNNNNNPNNPNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNPNPNNPNNNPNNNNNNNPPPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/21.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/21.java
Current actions:
Wrap:
MethodDeclaration
On:
[return n;, error(FRACTIONAL_BITWISE_OPERAND,right);, return n;, result=lvalInt<<rvalInt;]
Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:if(n.getType()==Token.LSH){
result=lvalInt<<rvalInt;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
28:if(n.getType()==Token.RSH){
result=lvalInt>>rvalInt;
}
TO:
27

DELETE:
Original line: 30result=lvalInt>>rvalInt;

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:private Node tryFoldShift(Node n,Node left,Node right){
if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if(n.getType()==Token.LSH){
result=lvalInt<<rvalInt;
}
else{
if(n.getType()==Token.RSH){
result=lvalInt>>rvalInt;
}
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}
TO:
1

DELETE:
Original line: 22error(FRACTIONAL_BITWISE_OPERAND,right);

DELETE:
Original line: 23return n;

INSERT:
25:if(n.getType()==Token.LSH){
result=lvalInt<<rvalInt;
}
TO:
24

DELETE:
Original line: 25switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}

INSERT:
28:if(n.getType()==Token.RSH){
result=lvalInt>>rvalInt;
}
TO:
27

INSERT:
38:n.getParent().replaceChild(n,newNumber);
TO:
27

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
40:return newNumber;
TO:
27

DELETE:
Original line: 41return newNumber;

DELETE:
Original line: 43return n;

Following are 4th generated patches:
Validating 200 patches...
Tested:9492 patches
Compile failed:9300 patches
Compilation rate:0.020227560050568902
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/22.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/22.java
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
if(right.getDouble()==0){
return left;
}
}
TO:
42

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
if(right.getDouble()==0){
return left;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:if(right.getDouble()==0){
return left;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:return left;
TO:
42

Following are 3th generated patches:
Validating 18 patches...
Tested:9913 patches
Compile failed:9701 patches
Compilation rate:0.02138605871078382
NPPNNNNNNNNNNNNNNNNNPPPNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/23.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/23.java
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 28 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 12 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

INSERT:
48:reportCodeChange();
TO:
42

INSERT:
49:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:double rval=right.getDouble();
TO:
42

INSERT:
45:if(rval<0){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:10553 patches
Compile failed:9935 patches
Compilation rate:0.05856154647967403
NNNNNNNNNNPPPPPNNPNPNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/24.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/24.java
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 39 patches...
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 36 patches...
Current actions:
INSERT:
46:if(left.getType()==Token.NUMBER){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:return n;
TO:
42

INSERT:
46:if(left.getType()==Token.NUMBER){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(!isOptimizableOperator(n)){
return n;
}
TO:
42

INSERT:
46:if(left.getType()==Token.NUMBER){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:11226 patches
Compile failed:10600 patches
Compilation rate:0.05576340637805095
NNNNNNNNNNNNNNNNNNNNPNNNPNNPNNNNNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/25.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/25.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER){
int leftValue=left.getInt();
if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 44 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER){
int leftValue=left.getInt();
if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(leftValue!=Integer.MIN_VALUE){
int result=(long)leftValue<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 80 patches...
Current actions:
INSERT:
44:int leftValue=left.getInt();
TO:
42

INSERT:
46:int result=(long)leftValue<<right.getInt();
TO:
42

INSERT:
47:Node newNumber=Node.newNumber(result);
TO:
42

INSERT:
50:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:11750 patches
Compile failed:11123 patches
Compilation rate:0.053361702127659574
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/26.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/26.java
Current actions:
INSERT:
38:if(lvalInt==0){
return Node.newNumber(0);
}
TO:
37

Following are 0th generated patches:
Validating 2 patches...
Current actions:
INSERT:
38:if(lvalInt==0){
return Node.newNumber(0);
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:return Node.newNumber(0);
TO:
37

Following are 2th generated patches:
Validating 200 patches...
Tested:12152 patches
Compile failed:11522 patches
Compilation rate:0.05184331797235023
NPNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/27.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/27.java
Current actions:
INSERT:
43:if(left.isInt()&&right.isInt()){
long lval=left.getInt();
long rval=right.getInt();
long result;
switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isInt()&&right.isInt()){
long lval=left.getInt();
long rval=right.getInt();
long result;
switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:long lval=left.getInt();
TO:
42

INSERT:
45:long rval=right.getInt();
TO:
42

INSERT:
46:long result;
TO:
42

INSERT:
47:switch (n.getType()){
case Token.LSH :
result=lval<<rval;
break;
case Token.RSH :
result=lval>>rval;
break;
case Token.URSH :
result=lval>>>rval;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
42

INSERT:
60:Node newNumber=Node.newNumber(result);
TO:
42

INSERT:
61:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
62:reportCodeChange();
TO:
42

INSERT:
63:return newNumber;
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Tested:12720 patches
Compile failed:12087 patches
Compilation rate:0.04976415094339623
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/28.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/28.java
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

Following are 0th generated patches:
Validating 25 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 1th generated patches:
Validating 192 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 2th generated patches:
Validating 96 patches...
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

Following are 3th generated patches:
Validating 72 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 4th generated patches:
Validating 96 patches...
Current actions:
INSERT:
26:long rvalLong=(long)rval;
TO:
24

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Tested:13193 patches
Compile failed:12507 patches
Compilation rate:0.05199727128022436
NNNNNNNNNNNNPPNNNPPPNNNNPNNNNNNNNNNNNNPNNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNPNNNNNNNNNNNNNNNNNNNNNNPPNPNNNNNNNNNNNNNNNNNNNNPNPNPNNNNNNNNNNNNNNPNNNPNNNPPPNNNNNNNNNNNNNNPPNNNNPNPNNPPNNNNNNNNNNNNNPNNNNNNNNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNPNPNNNPPNNNNNNNNNNNNNNNPPNNNNNPPNPPNNNNNNNNNNNNNNPNNNNNNNNNPNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/29.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/29.java
Current actions:
INSERT:
6:if(left.getType()==Token.NUMBER){
lval=left.getDouble();
allConstant&=true;
}
TO:
2

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
13:if(right.getType()==Token.NUMBER){
rval=right.getDouble();
allConstant&=true;
}
TO:
2

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
2:{
boolean allConstant=true;
double lval=0;
double rval=0;
if(left.getType()==Token.NUMBER){
lval=left.getDouble();
allConstant&=true;
}
else{
allConstant&=false;
}
if(right.getType()==Token.NUMBER){
rval=right.getDouble();
allConstant&=true;
}
else{
allConstant&=false;
}
boolean supported=false;
if(allConstant){
int leftBits=0;
int rightBits=0;
if(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE){
leftBits=32-Integer.numberOfLeadingZeros((int)Math.ceil(lval));
}
if(rval>=0&&rval<32){
rightBits=rval;
}
if(leftBits>0&&leftBits<32&&rightBits>=0&&rightBits<32){
supported=true;
}
}
if(!supported){
return n;
}
int lvalInt=(int)lval;
int rvalInt=(int)rval;
long result=0;
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
1

DELETE:
Original line: 2{
if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}

INSERT:
3:boolean allConstant=true;
TO:
2

DELETE:
Original line: 3if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}

INSERT:
4:double lval=0;
TO:
2

INSERT:
5:double rval=0;
TO:
2

INSERT:
7:lval=left.getDouble();
TO:
2

INSERT:
8:allConstant&=true;
TO:
2

INSERT:
11:allConstant&=false;
TO:
2

INSERT:
14:rval=right.getDouble();
TO:
2

INSERT:
15:allConstant&=true;
TO:
2

INSERT:
17:else{
allConstant&=false;
}
TO:
2

INSERT:
20:boolean supported=false;
TO:
2

INSERT:
21:if(allConstant){
int leftBits=0;
int rightBits=0;
if(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE){
leftBits=32-Integer.numberOfLeadingZeros((int)Math.ceil(lval));
}
if(rval>=0&&rval<32){
rightBits=rval;
}
if(leftBits>0&&leftBits<32&&rightBits>=0&&rightBits<32){
supported=true;
}
}
TO:
2

INSERT:
34:if(!supported){
return n;
}
TO:
24

INSERT:
37:int lvalInt=(int)lval;
TO:
24

INSERT:
38:int rvalInt=(int)rval;
TO:
24

DELETE:
Original line: 43return n;

Tested:13593 patches
Compile failed:12907 patches
Compilation rate:0.050467152210696684
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/30.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/30.java
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 3 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.STRING||right.getType()==Token.STRING){
return n;
}
TO:
42

INSERT:
46:return null;
TO:
44

INSERT:
47:}

TO:
44

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:return null;
TO:
44

INSERT:
47:}

TO:
44

Following are 3th generated patches:
Validating 1 patches...
Tested:13997 patches
Compile failed:13311 patches
Compilation rate:0.049010502250482244
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/31.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/31.java
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=31)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
11:if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
11:if(!(rval>=0&&rval<=31)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}

Following are 1th generated patches:
Validating 8 patches...
Tested:14006 patches
Compile failed:13311 patches
Compilation rate:0.04962159074682279
PPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/32.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/32.java
Current actions:
DELETE:
Original line: 4double result;

Following are 0th generated patches:
Validating 200 patches...
Current actions:
DELETE:
Original line: 4double result;

DELETE:
Original line: 31break;

Following are 1th generated patches:
Validating 2 patches...
Current actions:
DELETE:
Original line: 27result=lvalInt<<rvalInt;

INSERT:
32:throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
TO:
35

DELETE:
Original line: 34break;

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 40reportCodeChange();

Following are 2th generated patches:
Validating 5 patches...
Current actions:
DELETE:
Original line: 33result=lvalInt>>>rvalInt;

Following are 3th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 4double result;

INSERT:
26:return Node.newNumber(lvalInt<<rvalInt);
TO:
26

DELETE:
Original line: 27result=lvalInt<<rvalInt;

INSERT:
28:return Node.newNumber(lvalInt>>rvalInt);
TO:
29

DELETE:
Original line: 28break;

DELETE:
Original line: 30result=lvalInt>>rvalInt;

INSERT:
30:return Node.newNumber((long)lvalInt>>>rvalInt);
TO:
32

DELETE:
Original line: 31break;

INSERT:
32:throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
TO:
35

DELETE:
Original line: 33result=lvalInt>>>rvalInt;

DELETE:
Original line: 34break;

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 40reportCodeChange();

DELETE:
Original line: 41return newNumber;

Following are 4th generated patches:
Validating 200 patches...
Tested:14381 patches
Compile failed:13660 patches
Compilation rate:0.05013559557749809
NNNNNNNNNNNNPPPNNPNPPPNNPNPNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNPNNNNNNPNNPPNPNPNNPNNNNNNNNNNNNNPNPPPPPNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/33.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/33.java
Current actions:
INSERT:
43:if(left.getType()!=Token.NUMBER){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(right.getType()!=Token.NUMBER){
return n;
}
TO:
44

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.getType()!=Token.NUMBER){
return n;
}
TO:
42

INSERT:
46:if(right.getType()!=Token.NUMBER){
return n;
}
TO:
44

INSERT:
49:int shiftAmount=(int)right.getDouble();
TO:
44

INSERT:
50:if(shiftAmount!=right.getDouble()){
return n;
}
TO:
44

INSERT:
53:if(shiftAmount<0||shiftAmount>=32){
return n;
}
TO:
44

INSERT:
56:int result;
TO:
44

INSERT:
57:switch (n.getType()){
case Token.LSH :
result=(int)lval<<shiftAmount;
break;
case Token.RSH :
result=(int)lval>>shiftAmount;
break;
case Token.URSH :
result=(int)lval>>>shiftAmount;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
44

INSERT:
70:Node newNumber=Node.newNumber(result);
TO:
44

INSERT:
71:n.getParent().replaceChild(n,newNumber);
TO:
44

INSERT:
72:reportCodeChange();
TO:
44

INSERT:
73:return newNumber;
TO:
44

INSERT:
74:}

TO:
44

Tested:14781 patches
Compile failed:14060 patches
Compilation rate:0.048778837697043505
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/34.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/34.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH&&left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
if((lvalInt&((1<<rvalInt)-1))!=0){
Node newNumber=Node.newNumber(lvalInt);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
47:if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:double lval=left.getDouble();
TO:
42

INSERT:
46:double rval=right.getDouble();
TO:
42

INSERT:
48:error(BITWISE_OPERAND_OUT_OF_RANGE,left);
TO:
42

INSERT:
52:error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
TO:
42

INSERT:
53:return n;
TO:
42

INSERT:
57:error(FRACTIONAL_BITWISE_OPERAND,left);
TO:
42

INSERT:
58:return n;
TO:
42

INSERT:
68:reportCodeChange();
TO:
42

Tested:15181 patches
Compile failed:14452 patches
Compilation rate:0.04802055200579672
NNNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNNNNNPNNNNNPNNNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/35.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/35.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getDouble()<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getDouble()>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getDouble()>>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
73:if(right.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getInt()<<right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getInt()>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getInt()>>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
59:return newNumber;
TO:
42

Following are 3th generated patches:
Validating 19 patches...
Current actions:
INSERT:
44:switch (n.getType()){
case Token.LSH :
{
double result=left.getDouble()<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getDouble()>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getDouble()>>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
TO:
42

INSERT:
81:return newNumber;
TO:
42

INSERT:
91:case Token.URSH :
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getDouble()<<right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getDouble()>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getDouble()>>>right.getInt();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

INSERT:
73:if(right.getType()==Token.NUMBER){
switch (n.getType()){
case Token.LSH :
{
double result=left.getInt()<<right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.RSH :
{
double result=left.getInt()>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
case Token.URSH :
{
double result=left.getInt()>>>right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
default :
break;
}
}
TO:
42

Tested:15800 patches
Compile failed:15071 patches
Compilation rate:0.046139240506329116
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/36.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/36.java
Current actions:
INSERT:
39:newNumber.srcref(n);
TO:
38

Following are 0th generated patches:
Validating 36 patches...
Current actions:
INSERT:
41:if(!newNumber.getJSType().isNumber()||!left.getJSType().isNumber()||!right.getJSType().isNumber()){
replacement=newTypeCast(newNumber,n.getType());
}
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Current actions:
UPDATE
FROM:
39:n.getParent().replaceChild(n,newNumber);
TO:
44:n.getParent().replaceChild(n,replacement);

Following are 2th generated patches:
Validating 57 patches...
Current actions:
UPDATE
FROM:
39:n.getParent().replaceChild(n,newNumber);
TO:
44:n.getParent().replaceChild(n,replacement);

UPDATE
FROM:
41:return newNumber;
TO:
46:return replacement;

Following are 3th generated patches:
Validating 80 patches...
Current actions:
INSERT:
39:newNumber.srcref(n);
TO:
38

INSERT:
40:Node replacement=newNumber;
TO:
38

UPDATE
FROM:
39:n.getParent().replaceChild(n,newNumber);
TO:
44:n.getParent().replaceChild(n,replacement);

Following are 4th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:newNumber.srcref(n);
TO:
38

INSERT:
40:Node replacement=newNumber;
TO:
38

INSERT:
41:if(!newNumber.getJSType().isNumber()||!left.getJSType().isNumber()||!right.getJSType().isNumber()){
replacement=newTypeCast(newNumber,n.getType());
}
TO:
38

UPDATE
FROM:
39:n.getParent().replaceChild(n,newNumber);
TO:
44:n.getParent().replaceChild(n,replacement);

Tested:16372 patches
Compile failed:15639 patches
Compilation rate:0.044771561202052286
NNNNNNNNNNNNNNNNPNPNNPNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/37.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/37.java
Current actions:
INSERT:
39:newNumber.setIsJavaScriptConstantNumber(true);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.setIsJavaScriptConstantNumber(true);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:16573 patches
Compile failed:15840 patches
Compilation rate:0.044228564532673625
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/38.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/38.java
Current actions:
INSERT:
43:if(n.getType()==Token.LSH||n.getType()==Token.RSH||n.getType()==Token.URSH){
Node maybeNumber=tryFoldShift(left,left,right);
if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
}
TO:
42

Following are 0th generated patches:
Validating 6 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.LSH||n.getType()==Token.RSH||n.getType()==Token.URSH){
Node maybeNumber=tryFoldShift(left,left,right);
if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:Node maybeNumber=tryFoldShift(left,left,right);
TO:
42

INSERT:
45:if(maybeNumber!=left){
return tryFoldShift(n,maybeNumber,right);
}
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:17179 patches
Compile failed:16251 patches
Compilation rate:0.05401944234239479
NNNPPPNNNPPPPPPPPNPPNNNNNNNNPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNPNNNNNNPPPPPPPPPPPPPPPPPPPPPNNPPPPPPPPPPPPPPPPPNNPPPNNPNPPPPNPPPPPPPPPPNNNNPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNPPNNPNNNNNNNNNNNNNNNNNNNNNNNNNPPNPPPPPPPPPPPPPPNPPPPPPPPNNPPPNPPPNPPPPPPPPPPNPPPPPPPPPPPNPPPPPPPPNPNPPPPPPPPNNNPPPPPPPPNPPNPPPPPNPNNPPPNPNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/39.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/39.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
Node newLeft=Node.newNumber((int)left.getDouble());
n.replaceChild(left,newLeft);
reportCodeChange();
return tryFoldShift(n,newLeft,right);
}
TO:
42

Following are 0th generated patches:
Validating 115 patches...
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER){
Node newLeft=Node.newNumber((int)left.getDouble());
n.replaceChild(left,newLeft);
reportCodeChange();
return tryFoldShift(n,newLeft,right);
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:Node newLeft=Node.newNumber((int)left.getDouble());
TO:
42

INSERT:
45:n.replaceChild(left,newLeft);
TO:
42

INSERT:
46:reportCodeChange();
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Tested:17687 patches
Compile failed:16729 patches
Compilation rate:0.054164075309549385
NNNNNNNNNNNNPNPNPPNNNPNPNNNNNNNNNNPPPPNNNNNNNNPNNNPPNNNNNPNPNPPNNNPNNNNPNNPNNNPNNNNPPNNNNNNNNNPNNNPNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/40.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/40.java
Current actions:
INSERT:
43:if(left.getType()==Token.NUMBER&&right.getType()==Token.STRING){
double result;
double lval=left.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
String rvalString=right.getString();
if(!rvalString.equals("0")){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<0;
break;
case Token.RSH :
result=lvalInt>>0;
break;
case Token.URSH :
result=lvalInt>>>0;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:double result;
TO:
42

INSERT:
45:double lval=left.getDouble();
TO:
42

INSERT:
50:int lvalInt=(int)lval;
TO:
42

INSERT:
52:error(FRACTIONAL_BITWISE_OPERAND,left);
TO:
42

INSERT:
55:String rvalString=right.getString();
TO:
42

INSERT:
56:if(!rvalString.equals("0")){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
TO:
42

INSERT:
60:switch (n.getType()){
case Token.LSH :
result=lvalInt<<0;
break;
case Token.RSH :
result=lvalInt>>0;
break;
case Token.URSH :
result=lvalInt>>>0;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
TO:
42

INSERT:
73:Node newNumber=Node.newNumber(result);
TO:
42

INSERT:
74:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
76:return newNumber;
TO:
42

Tested:18087 patches
Compile failed:17125 patches
Compilation rate:0.053187372145740035
NNNNNNNNNNNNNNNNPNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/41.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/41.java
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

Following are 0th generated patches:
Validating 25 patches...
FILE : /data/PLM4APR/tmp/defects4j_buggy//closure/closure_97_buggy/src/com/google/javascript/jscomp/PeepholeFoldConstants.java
SUCCESS
//Following are generated patch:
  private Node tryFoldShift(  Node n,  Node left,  Node right){
    if (left.getType() == Token.NUMBER && right.getType() == Token.NUMBER) {
      double result;
      double lval=left.getDouble();
      double rval=right.getDouble();
      if (!(lval >= Integer.MIN_VALUE && lval <= Integer.MAX_VALUE)) {
        error(BITWISE_OPERAND_OUT_OF_RANGE,left);
        return n;
      }
      if (!(rval >= 0 && rval < 32)) {
        error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
        return n;
      }
      int lvalInt=(int)lval;
      if (lvalInt != lval) {
        error(FRACTIONAL_BITWISE_OPERAND,left);
        return n;
      }
      int rvalInt=(int)rval;
      if (rvalInt != rval) {
        error(FRACTIONAL_BITWISE_OPERAND,right);
        return n;
      }
long lvalLong=lvalInt&0xffffffffL;
long rvalLong=rvalInt&0xffffffffL;
switch (n.getType()) {
case Token.LSH:
        result=lvalInt << rvalInt;
      break;
case Token.RSH:
    result=lvalInt >> rvalInt;
  break;
case Token.URSH:
result=lvalLong>>>rvalLong;
break;
default :
throw new AssertionError("Unknown shift operator: " + Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
return n;
}

1 th patch/25
Trace:

START : 
2024.04.08 AD at 07:36:51 HKT
---------TIME : 
2024.04.08 AD at 08:31:40 HKT
--------------- END -----------------
Current actions:
INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

Following are 1th generated patches:
Validating 24 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 2th generated patches:
Validating 192 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Following are 3th generated patches:
Validating 168 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

Following are 4th generated patches:
Validating 48 patches...
Current actions:
INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
29:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
32:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
35:result=lvalLong>>>rvalLong;

Tested:18536 patches
Compile failed:17540 patches
Compilation rate:0.05373327578765645
NNNNNNNNNNNNPNNNPPPNNNNPPNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNPNNNPPPNNNNNNNNNNNNNNNNNNNNNNNNPPNNPNNNNNNNNNNNNNNNNNNNNNPNPNPNNNNNNNNNNNNNNNNNNNNNNPNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNNNNNNNNNNNNNNNNNNNNNPPNPNNNNNNNNPNNNNNNNNNNPNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNPNNPNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/42.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/42.java
Current actions:
DELETE:
Original line: 3if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}

INSERT:
3:}

TO:
2

Following are 1th generated patches:
Validating 1 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 5double lval=left.getDouble();

DELETE:
Original line: 8error(BITWISE_OPERAND_OUT_OF_RANGE,left);

DELETE:
Original line: 15int lvalInt=(int)lval;

DELETE:
Original line: 18return n;

DELETE:
Original line: 36throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));

DELETE:
Original line: 38Node newNumber=Node.newNumber(result);

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

DELETE:
Original line: 40reportCodeChange();

Following are 2th generated patches:
Validating 8 patches...
Current actions:
DELETE:
Original line: 3if(left.getType()==Token.NUMBER&&right.getType()==Token.NUMBER){
double result;
double lval=left.getDouble();
double rval=right.getDouble();
if(!(lval>=Integer.MIN_VALUE&&lval<=Integer.MAX_VALUE)){
error(BITWISE_OPERAND_OUT_OF_RANGE,left);
return n;
}
if(!(rval>=0&&rval<32)){
error(SHIFT_AMOUNT_OUT_OF_BOUNDS,right);
return n;
}
int lvalInt=(int)lval;
if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
int rvalInt=(int)rval;
if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}

INSERT:
3:}

TO:
2

DELETE:
Original line: 43return n;

Following are 3th generated patches:
Validating 2 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 5double lval=left.getDouble();

DELETE:
Original line: 6double rval=right.getDouble();

DELETE:
Original line: 20int rvalInt=(int)rval;

DELETE:
Original line: 21if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}

DELETE:
Original line: 26case Token.LSH :

DELETE:
Original line: 27result=lvalInt<<rvalInt;

DELETE:
Original line: 31break;

DELETE:
Original line: 32case Token.URSH :

DELETE:
Original line: 33result=lvalInt>>>rvalInt;

DELETE:
Original line: 43return n;

Following are 4th generated patches:
Validating 10 patches...
Current actions:
INSERT:
3:}

TO:
2

DELETE:
Original line: 4double result;

DELETE:
Original line: 8error(BITWISE_OPERAND_OUT_OF_RANGE,left);

DELETE:
Original line: 9return n;

DELETE:
Original line: 13return n;

DELETE:
Original line: 15int lvalInt=(int)lval;

DELETE:
Original line: 16if(lvalInt!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}

DELETE:
Original line: 21if(rvalInt!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}

DELETE:
Original line: 25switch (n.getType()){
case Token.LSH :
result=lvalInt<<rvalInt;
break;
case Token.RSH :
result=lvalInt>>rvalInt;
break;
case Token.URSH :
result=lvalInt>>>rvalInt;
break;
default :
throw new AssertionError("Unknown shift operator: "+Node.tokenToName(n.getType()));
}

DELETE:
Original line: 41return newNumber;

DELETE:
Original line: 43return n;

Tested:18540 patches
Compile failed:17544 patches
Compilation rate:0.05372168284789644
NNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/43.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/43.java
Current actions:
DELETE:
Original line: 4double result;

Following are 0th generated patches:
Validating 3 patches...
Current actions:
DELETE:
Original line: 4double result;

INSERT:
24:int result;
TO:
24

Following are 1th generated patches:
Validating 2 patches...
Current actions:
INSERT:
24:int result;
TO:
24

Following are 2th generated patches:
Validating 1 patches...
Current actions:
DELETE:
Original line: 4double result;

Following are 3th generated patches:
Validating 1 patches...
Tested:18546 patches
Compile failed:17548 patches
Compilation rate:0.053812142780114314
NNPPNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/44.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/44.java
Current actions:
UPDATE
FROM:
4:double result;
TO:
4:long result;

Following are 0th generated patches:
Validating 1 patches...
Current actions:
UPDATE
FROM:
4:double result;
TO:
4:long result;

Following are 0th generated patches:
Validating 1 patches...
Tested:18548 patches
Compile failed:17548 patches
Compilation rate:0.053914168643519514
PP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/45.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/45.java
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

Following are 0th generated patches:
Validating 17 patches...
Current actions:
INSERT:
40:if(n.getType()==Token.URSH){
newNumber=Node.newNumber(result).castTo(type,true);
}
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

INSERT:
40:if(n.getType()==Token.URSH){
newNumber=Node.newNumber(result).castTo(type,true);
}
TO:
38

INSERT:
43:else{
if(type.isUnknown()){
newNumber=Node.newNumber(result).castTo(type,true);
}
}
TO:
38

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:JSType type=newNumber.getJSType();
TO:
38

INSERT:
40:if(n.getType()==Token.URSH){
newNumber=Node.newNumber(result).castTo(type,true);
}
TO:
38

INSERT:
44:newNumber=Node.newNumber(result).castTo(type,true);
TO:
38

Following are 3th generated patches:
Validating 200 patches...
Tested:19161 patches
Compile failed:18161 patches
Compilation rate:0.05218934293617243
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/46.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/46.java
Current actions:
INSERT:
38:if(result>Integer.MAX_VALUE||result<Integer.MIN_VALUE){
return Node.newNumber(new BigInteger(String.valueOf(result)));
}
TO:
37

Following are 0th generated patches:
Validating 5 patches...
Current actions:
INSERT:
38:if(result>Integer.MAX_VALUE||result<Integer.MIN_VALUE){
return Node.newNumber(new BigInteger(String.valueOf(result)));
}
TO:
37

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:return Node.newNumber(new BigInteger(String.valueOf(result)));
TO:
37

UPDATE
FROM:
38:Node newNumber=Node.newNumber(result);
TO:
41:Node newNumber=Node.newNumber((int)result);

Following are 2th generated patches:
Validating 200 patches...
Tested:19566 patches
Compile failed:18565 patches
Compilation rate:0.05116017581518961
NNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/47.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/47.java
Current actions:
INSERT:
43:if(right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 0th generated patches:
Validating 66 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.STRING){
return n;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
46:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval>=0&&rval==(int)rval){
Node replacement=Node.newNumber(lval<<(int)rval);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
52:return replacement;
TO:
42

Following are 4th generated patches:
Validating 19 patches...
Current actions:
INSERT:
43:if(right.getType()==Token.STRING){
return n;
}
TO:
42

INSERT:
46:if(right.getType()==Token.NUMBER){
double rval=right.getDouble();
if(rval>=0&&rval==(int)rval){
Node replacement=Node.newNumber(lval<<(int)rval);
n.getParent().replaceChild(n,replacement);
reportCodeChange();
return replacement;
}
}
TO:
42

Tested:20051 patches
Compile failed:19037 patches
Compilation rate:0.05057104383821256
NNNNNNNNNNNNNNNNNNPNPPNNNNNNNNNNNNNNPPNNNNNNNNNPNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNPNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/48.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/48.java
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
29:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
26

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
38:if(lvalLong!=(int)lvalLong||rvalLong!=(int)rvalLong){
lvalLong=lvalLong&0xffffffffL;
}
TO:
32

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
25:long lvalLong=lvalInt&0xffffffffL;
TO:
24

INSERT:
26:long rvalLong=rvalInt&0xffffffffL;
TO:
24

DELETE:
Original line: 28break;

DELETE:
Original line: 31break;

INSERT:
33:break;
TO:
27

INSERT:
36:break;
TO:
30

Following are 4th generated patches:
Validating 50 patches...
Current actions:
UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
32:result=lvalLong<<rvalLong;

Tested:20634 patches
Compile failed:19590 patches
Compilation rate:0.05059610351846467
NNNNNNNNNNNNPNNNPNPNNNPPPNPNNNNNNNNNPNNNNNNNNNNNNPNNPNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNPNNNNNNNNPNPNNNNNNNNNNNNNNPNNNNNNNNNNNPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNPNNNPNNNNNP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/49.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/49.java
Current actions:
DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

Following are 0th generated patches:
Validating 67 patches...
Current actions:
INSERT:
40:if(parent.getType()==Token.ASSIGN){
Node newNumberClone=newNumber.cloneNode();
parent.replaceChild(n,newNumberClone);
newNumberClone.addChildToFront(newNumber);
}
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:newNumberClone.addChildToFront(newNumber);
TO:
38

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
39:Node parent=n.getParent();
TO:
38

DELETE:
Original line: 39n.getParent().replaceChild(n,newNumber);

INSERT:
40:if(parent.getType()==Token.ASSIGN){
Node newNumberClone=newNumber.cloneNode();
parent.replaceChild(n,newNumberClone);
newNumberClone.addChildToFront(newNumber);
}
TO:
38

INSERT:
46:parent.replaceChild(n,newNumber);
TO:
38

Following are 3th generated patches:
Validating 200 patches...
Tested:21301 patches
Compile failed:20045 patches
Compilation rate:0.05896436787005305
NNNNNNNNNNNNPPPPNPNNNNPNNNNNPNNNNNNNNPPPNNNPNNNPNNNNNNNNPNPPPNPNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPPPPPP
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/50.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/50.java
Current actions:
INSERT:
25:long lvalLong=(long)lval;
TO:
24

Following are 0th generated patches:
Validating 193 patches...
Current actions:
INSERT:
26:if(lvalLong!=lval){
error(FRACTIONAL_BITWISE_OPERAND,left);
return n;
}
TO:
24

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
31:if(rvalLong!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
24

Following are 2th generated patches:
Validating 200 patches...
Current actions:
UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
43:result=lvalLong>>>rvalLong;

Following are 3th generated patches:
Validating 48 patches...
Current actions:
INSERT:
27:error(FRACTIONAL_BITWISE_OPERAND,left);
TO:
24

INSERT:
28:return n;
TO:
24

INSERT:
30:long rvalLong=(long)rval;
TO:
24

INSERT:
31:if(rvalLong!=rval){
error(FRACTIONAL_BITWISE_OPERAND,right);
return n;
}
TO:
24

UPDATE
FROM:
27:result=lvalInt<<rvalInt;
TO:
37:result=lvalLong<<rvalLong;

UPDATE
FROM:
30:result=lvalInt>>rvalInt;
TO:
40:result=lvalLong>>rvalLong;

UPDATE
FROM:
33:result=lvalInt>>>rvalInt;
TO:
43:result=lvalLong>>>rvalLong;

Following are 4th generated patches:
Validating 200 patches...
Tested:22126 patches
Compile failed:20847 patches
Compilation rate:0.05780529693573172
NNNNNNNNNNNNNNNNNPNNNNNNNNNNNNPNNNNNNPNNNNNNNNPNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNPNNNPNNNNNNNNPNNPPNNNNNNNNNNPPNNNNPPNNNNNNNPNNNNNNNNPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/51.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/51.java
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&(left.getType()==Token.NUMBER||right.getType()==Token.NUMBER)){
if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 0th generated patches:
Validating 27 patches...
Current actions:
INSERT:
43:if(n.getType()==Token.RSH&&(left.getType()==Token.NUMBER||right.getType()==Token.NUMBER)){
if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
44:if(right.getType()==Token.NUMBER){
int result=(int)right.getDouble();
Node newNumber=Node.newNumber(result);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
45:int result=(int)right.getDouble();
TO:
42

INSERT:
46:Node newNumber=Node.newNumber(result);
TO:
42

INSERT:
47:n.getParent().replaceChild(n,newNumber);
TO:
42

INSERT:
48:reportCodeChange();
TO:
42

Following are 3th generated patches:
Validating 200 patches...
Tested:22753 patches
Compile failed:21459 patches
Compilation rate:0.05687162132466048
NNNNNNNNNNNNNPNPNNNPNPNPPPPNNNNNNNNNNNNNNNNPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/52.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/52.java
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 0th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 1th generated patches:
Validating 200 patches...
Current actions:
INSERT:
49:if(left.isName()&&left.getString().equals("NaN")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

Following are 2th generated patches:
Validating 200 patches...
Current actions:
INSERT:
43:if(left.isName()&&left.getString().equals("Infinity")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

INSERT:
49:if(left.isName()&&left.getString().equals("NaN")){
Node newNumber=Node.newNumber(0);
n.getParent().replaceChild(n,newNumber);
reportCodeChange();
return newNumber;
}
TO:
42

INSERT:
55:if(left.getType()==Token.STRING){
Node newString=Node.newString(left.getString());
n.getParent().replaceChild(n,newString);
reportCodeChange();
return newString;
}
TO:
42

Following are 4th generated patches:
Validating 200 patches...
Tested:23491 patches
Compile failed:21831 patches
Compilation rate:0.07066536120216253
NNNNNNNNNNNNNPNNPPPNPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPNPNPNPNNNNNPPNNNPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNPPNNNPPPNNNNNNNNNNNNNNNNPPNNPPNNNNPPPPPPPPPPPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPNPPPPPPPPPPNNNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNPPPPNNNNNPPNNNNPPPPPPPPPPNNNNNNPPPPPPPPPNPPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNPPPPPPNPPPPPPPPPPPNPPPPPPPPPNPPPPPPPPPPNPNPNNPNNPNNNPNPPPPPPPPPPPNNNNNNPPPPPPPPPPNPPPPPPPPPPPPNPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Current file:/data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/53.java
Patch Number: /data/PLM4APR/codex_out/200_patches_starcoder_all/closure_97/53.java
Current actions:
INSERT:
39:newNumber.useSourceInfoFromForTree(n);
TO:
38

Following are 0th generated patches:
Validating 1 patches...
Current actions:
INSERT:
39:newNumber.useSourceInfoFromForTree(n);
TO:
38

Following are 1th generated patches:
Validating 200 patches...
Tested:23692 patches
Compile failed:22032 patches
Compilation rate:0.07006584501097417
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
Finish : closure-97 > patch : 1 | Start : Mon Apr 08 07:36:51 HKT 2024 | End : 2024.04.08 AD at 08:46:33 HKT
