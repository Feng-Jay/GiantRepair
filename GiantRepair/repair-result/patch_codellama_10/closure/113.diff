Following diff 107:
-if(provided!=null){
-parent.detachFromParent();
-compiler.reportCodeChange();
-}
+if(provided!=null||requiresLevel.isOn()){
+parent.detachFromParent();
+compiler.reportCodeChange();
+}
