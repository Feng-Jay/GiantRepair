Following diff 2:
-returndecode(x);
+returndecode(repair(x));
