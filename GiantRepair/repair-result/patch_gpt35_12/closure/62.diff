Following diff 17:
-if(excerpt.equals(LINE)&&0<=charno&&charno<sourceExcerpt.length()){
-for(inti=0;i<charno;i++){
-charc=sourceExcerpt.charAt(i);
-if(Character.isWhitespace(c)){
-b.append(c);
-}
-else{
-b.append('');
-}
-}
-b.append("^\n");
-}
+if(charno<sourceExcerpt.length()||excerptFormatter.equals(LINE)||0<=charno){
+for(inti=0;i<charno;i++){
+charc=sourceExcerpt.charAt(i);
+if(Character.isWhitespace(c)){
+b.append(c);
+}
+else{
+b.append('');
+}
+}
+b.append("^\n");
+}
Following diff 17:
-if(excerpt.equals(LINE)&&0<=charno&&charno<sourceExcerpt.length()){
-for(inti=0;i<charno;i++){
-charc=sourceExcerpt.charAt(i);
-if(Character.isWhitespace(c)){
-b.append(c);
-}
-else{
-b.append('');
-}
-}
-b.append("^\n");
-}
+if(charno<sourceExcerpt.length()&&excerptFormatter.equals(LINE)||0<=charno){
+for(inti=0;i<charno;i++){
+charc=sourceExcerpt.charAt(i);
+if(Character.isWhitespace(c)){
+b.append(c);
+}
+else{
+b.append('');
+}
+}
+b.append("^\n");
+}
