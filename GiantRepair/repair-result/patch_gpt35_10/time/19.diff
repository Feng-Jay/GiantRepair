Following diff 39:
-longprev=previousTransition(instantAdjusted);
-if(prev<instantAdjusted){
-intoffsetPrev=getOffset(prev);
-intdiff=offsetPrev-offsetLocal;
-if(instantAdjusted-prev<=diff){
-returnoffsetPrev;
-}
-}
+if(offsetLocal>=0){
+longprev=previousTransition(instantAdjusted);
+if(prev<instantAdjusted){
+intoffsetPrev=getOffset(prev);
+intdiff=offsetPrev-offsetLocal;
+if(instantAdjusted-prev<=diff){
+returnoffsetPrev;
+}
+}
+}
