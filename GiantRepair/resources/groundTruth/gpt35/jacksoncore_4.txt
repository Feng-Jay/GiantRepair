-intnewLen=(len==MAX_SEGMENT_LEN)?(MAX_SEGMENT_LEN+1):Math.min(MAX_SEGMENT_LEN,len+(len>>1));
+intnewLen=len+(len>>1);
+if(newLen>MAX_SEGMENT_LEN){
+newLen=len+(len>>2);
+}
